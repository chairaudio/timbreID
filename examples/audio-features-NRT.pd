#N canvas 173 72 1013 750 12;
#X declare -path ./lib;
#N canvas 0 22 450 300 (subpatch) 0;
#X array mag-spec-graph 1025 float 0;
#X coords 0 0.25 1024 0 200 140 1 0 0;
#X restore 271 99 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array barkspec-graph 50 float 0;
#X coords 0 1 49 0 200 140 1 0 0;
#X restore 501 99 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array bfcc-graph 50 float 0;
#X coords 0 1 49 -1 200 140 1 0 0;
#X restore 501 309 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array cepstrum-graph 1025 float 0;
#X coords 0 1 1024 -0.6 200 140 1 0 0;
#X restore 41 309 graph;
#X obj 3 4 cnv 10 400 10 empty empty empty 20 12 0 14 -233017 -66577
0;
#X obj 3 4 cnv 10 10 400 empty empty empty 20 12 0 14 -233017 -66577
0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array dct-graph 2048 float 0;
#X coords 0 1 2047 -1 200 140 1 0 0;
#X restore 271 309 graph;
#N canvas 1264 196 547 541 time-domain-features 0;
#X obj 41 332 nbx 5 32 -1e+37 1e+37 0 0 empty zero-crossing-display
empty 0 -8 0 32 -262144 -1 -1 166 256;
#X text 39 312 Zero-crossing;
#X obj 271 172 nbx 6 32 -1e+37 1e+37 0 0 empty max-sample-display empty
0 -8 0 32 -262144 -1 -1 0.059906 256;
#X text 269 152 Max sample;
#X obj 41 172 nbx 6 32 -1e+37 1e+37 0 0 empty min-sample-display empty
0 -8 0 32 -262144 -1 -1 -0.0531311 256;
#X text 39 152 Min sample;
#X text 39 42 TIME DOMAIN FEATURES:;
#X obj 41 92 nbx 5 32 -1e+37 1e+37 0 0 empty peak-sample-display empty
0 -8 0 32 -262144 -1 -1 0.059906 256;
#X text 39 72 Peak sample;
#X obj 271 232 nbx 6 32 -1e+37 1e+37 0 0 empty max-sample-delta-display
empty 0 -8 0 32 -262144 -1 -1 0.0184631 256;
#X obj 41 232 nbx 6 32 -1e+37 1e+37 0 0 empty min-sample-delta-display
empty 0 -8 0 32 -262144 -1 -1 0 256;
#X text 269 212 Max sample delta;
#X text 39 212 Min sample delta;
#X obj 41 422 nbx 6 32 -1e+37 1e+37 0 0 empty wave-slope-display empty
0 -8 0 32 -262144 -1 -1 0.00367323 256;
#X text 39 402 Waveform slope;
#N canvas 683 32 565 665 time-domain-analyses 0;
#X obj 277 541 zeroCrossing \$0-sample;
#X obj 295 510 r analysis-command;
#X obj 277 567 s zero-crossing-display;
#X obj 285 60 r analysis-command;
#X obj 267 91 peakSample \$0-sample;
#X obj 267 117 s peak-sample-display;
#X obj 45 510 r analysis-command;
#X obj 27 541 waveSlope \$0-sample;
#N canvas 408 291 635 296 graph-slope 0;
#X obj 54 31 inlet;
#X msg 458 138 1;
#X obj 323 123 / 2;
#X obj 323 91 t f b;
#X obj 83 91 t f b;
#X obj 83 123 / -2;
#X msg 218 138 0;
#X obj 83 163 tabwrite wave-slope-graph;
#X obj 323 163 tabwrite wave-slope-graph;
#X obj 54 206 s wave-slope-display;
#X connect 0 0 4 0;
#X connect 0 0 3 0;
#X connect 0 0 9 0;
#X connect 1 0 8 1;
#X connect 2 0 8 0;
#X connect 3 0 2 0;
#X connect 3 1 1 0;
#X connect 4 0 5 0;
#X connect 4 1 6 0;
#X connect 5 0 7 0;
#X connect 6 0 7 1;
#X coords 0 296 1 295 250 70 0;
#X restore 27 571 pd graph-slope;
#X obj 45 220 r analysis-command;
#X obj 285 220 r analysis-command;
#X obj 27 251 minSample \$0-sample;
#X obj 27 277 s min-sample-display;
#X obj 267 251 maxSample \$0-sample;
#X obj 267 277 s max-sample-display;
#X obj 45 370 r analysis-command;
#X obj 285 370 r analysis-command;
#X obj 27 401 minSampleDelta \$0-sample;
#X obj 267 401 maxSampleDelta \$0-sample;
#X obj 267 427 s max-sample-delta-display;
#X obj 27 427 s min-sample-delta-display;
#X connect 0 0 2 0;
#X connect 1 0 0 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 9 0 11 0;
#X connect 10 0 13 0;
#X connect 11 0 12 0;
#X connect 13 0 14 0;
#X connect 15 0 17 0;
#X connect 16 0 18 0;
#X connect 17 0 20 0;
#X connect 18 0 19 0;
#X restore 271 92 pd time-domain-analyses;
#N canvas 0 50 450 278 (subpatch) 0;
#X array wave-slope-graph 2 float 1;
#A 0 -0.00183662 0.00183662;
#X coords 0 0.1 1 -0.1 200 140 1 0 0;
#X restore 271 332 graph;
#X restore 41 509 pd time-domain-features;
#N canvas 75 174 947 428 spectrum-features 0;
#X obj 39 83 nbx 5 32 -1e+37 1e+37 0 0 empty brightness-display empty
0 -8 0 32 -262144 -1 -1 0.813917 256;
#X text 37 63 Brightness;
#X obj 259 83 nbx 5 32 -1e+37 1e+37 0 0 empty centroid-display empty
0 -8 0 32 -262144 -1 -1 2879.55 256;
#X obj 479 83 nbx 5 32 -1e+37 1e+37 0 0 empty flatness-display empty
0 -8 0 32 -262144 -1 -1 0.0980044 256;
#X obj 719 83 nbx 5 32 -1e+37 1e+37 0 0 empty flux-display empty 0
-8 0 32 -262144 -1 -1 0.434999 256;
#X text 257 63 Centroid;
#X text 477 63 Flatness;
#X text 717 63 Flux;
#X obj 719 173 nbx 5 32 -1e+37 1e+37 0 0 empty kurtosis-display empty
0 -8 0 32 -262144 -1 -1 18.0327 256;
#X obj 39 263 nbx 5 32 -1e+37 1e+37 0 0 empty rolloff-display empty
0 -8 0 32 -262144 -1 -1 4414.31 256;
#X obj 259 263 nbx 5 32 -1e+37 1e+37 0 0 empty skewness-display empty
0 -8 0 32 -262144 -1 -1 2.79019 256;
#X obj 719 263 nbx 5 32 -1e+37 1e+37 0 0 empty spread-display empty
0 -8 0 32 -262144 -1 -1 2498.93 256;
#X text 717 153 Kurtosis;
#X text 37 243 Rolloff;
#X text 257 243 Skewness;
#X text 717 243 Spread;
#X text 477 153 Irregularity;
#X obj 479 173 nbx 5 32 -1e+37 1e+37 0 0 empty irreg-display empty
0 -8 0 32 -262144 -1 -1 0.0767874 256;
#X obj 479 263 nbx 7 32 -1e+37 1e+37 0 0 empty spec-slope-display empty
0 -8 0 32 -262144 -1 -1 -0.00432059 256;
#X text 477 243 Slope;
#X text 37 33 SPECTRUM FEATURES:;
#X obj 259 173 nbx 5 32 -1e+37 1e+37 0 0 empty inharmonicity-display
empty 0 -8 0 32 -262144 -1 -1 0.486858 256;
#X obj 39 173 nbx 5 32 -1e+37 1e+37 0 0 empty harmonicity-display empty
0 -8 0 32 -262144 -1 -1 0.516667 256;
#X text 37 153 Harmonicity;
#X text 257 153 Inharmonicity;
#N canvas 320 83 1027 596 spectrum-analyses 0;
#X obj 335 440 r analysis-command;
#X obj 815 440 r analysis-command;
#X obj 787 121 specFlux \$0-sample;
#X obj 547 121 specFlatness \$0-sample;
#X obj 297 121 specCentroid \$0-sample;
#X obj 47 121 specBrightness \$0-sample;
#X obj 777 311 specKurtosis \$0-sample;
#X obj 47 481 specRolloff \$0-sample;
#X obj 297 481 specSkewness \$0-sample;
#X obj 777 481 specSpread \$0-sample;
#X obj 547 312 specIrregularity \$0-sample;
#X obj 95 80 r analysis-command;
#X obj 345 80 r analysis-command;
#X obj 595 80 r analysis-command;
#X obj 825 80 r analysis-command;
#X obj 85 440 r analysis-command;
#X obj 587 272 r analysis-command;
#X obj 825 270 r analysis-command;
#X obj 47 147 s brightness-display;
#X obj 297 147 s centroid-display;
#X obj 547 147 s flatness-display;
#X obj 787 147 s flux-display;
#X obj 777 340 s kurtosis-display;
#X obj 87 272 r analysis-command;
#X obj 47 312 specHarmonicity \$0-sample;
#X obj 47 338 s harmonicity-display;
#X obj 297 340 s inharmonicity-display;
#X obj 547 338 s irreg-display;
#X obj 585 440 r analysis-command;
#X obj 777 510 s spread-display;
#X obj 297 510 s skewness-display;
#X obj 47 510 s rolloff-display;
#X obj 547 481 specSlope \$0-sample;
#X obj 547 511 s spec-slope-display;
#X connect 0 0 8 0;
#X connect 1 0 9 0;
#X connect 2 0 21 0;
#X connect 3 0 20 0;
#X connect 4 0 19 0;
#X connect 5 0 18 0;
#X connect 6 0 22 0;
#X connect 7 0 31 0;
#X connect 8 0 30 0;
#X connect 9 0 29 0;
#X connect 10 0 27 0;
#X connect 11 0 5 0;
#X connect 12 0 4 0;
#X connect 13 0 3 0;
#X connect 14 0 2 0;
#X connect 15 0 7 0;
#X connect 16 0 10 0;
#X connect 17 0 6 0;
#X connect 23 0 24 0;
#X connect 24 0 25 0;
#X connect 24 1 26 0;
#X connect 28 0 32 0;
#X connect 32 0 33 0;
#X restore 39 343 pd spectrum-analyses;
#X restore 41 539 pd spectrum-features;
#N canvas 309 107 953 463 init 0;
#X obj 45 62 loadbang;
#X msg 45 235 \; pd dsp 1 \;;
#X obj 45 87 t b b b b;
#X obj 135 127 s lb1;
#X obj 115 157 s lb2;
#X obj 95 187 s lb3;
#X obj 201 242 declare -path ./lib;
#X obj 271 65 r lb1;
#X msg 576 138 analyze \$1 \$2;
#X obj 576 116 pack f f;
#X obj 637 87 r analysis-window-size;
#X obj 576 64 r table-read-point;
#X obj 576 163 s analysis-command;
#X msg 271 90 \; analysis-window-size 2048 \; master-volume-set 90
\;;
#X obj 445 400 tabletool waveform;
#X obj 445 250 i;
#X obj 511 274 r analysis-window-size;
#X obj 490 311 +;
#X msg 445 368 copy_range 0 \$3 \$1 \$2;
#X obj 445 338 pack f f s;
#X obj 527 311 symbol \$0-sample;
#X obj 445 274 t f f b;
#X obj 445 226 r table-read-point;
#X connect 0 0 2 0;
#X connect 2 0 1 0;
#X connect 2 1 5 0;
#X connect 2 2 4 0;
#X connect 2 3 3 0;
#X connect 7 0 13 0;
#X connect 8 0 12 0;
#X connect 9 0 8 0;
#X connect 10 0 9 1;
#X connect 11 0 9 0;
#X connect 15 0 21 0;
#X connect 16 0 17 1;
#X connect 17 0 19 1;
#X connect 18 0 14 0;
#X connect 19 0 18 0;
#X connect 20 0 19 2;
#X connect 21 0 19 0;
#X connect 21 1 17 0;
#X connect 21 2 20 0;
#X connect 22 0 15 0;
#X restore 41 479 pd init;
#N canvas 216 108 1006 560 multi-dimensional-feature-analyses 0;
#X obj 57 164 list prepend 0;
#X obj 57 187 s mag-spec-graph;
#X obj 317 164 list prepend 0;
#X obj 557 364 list prepend 0;
#X obj 557 387 s bfcc-graph;
#X obj 317 187 s barkspec-graph;
#X obj 127 396 list prepend 0;
#X obj 127 419 s cepstrum-graph;
#X obj 57 141 magSpec \$0-sample;
#X obj 557 341 bfcc \$0-sample 0.25;
#X obj 57 341 cepstrum \$0-sample;
#X obj 125 100 r analysis-command;
#X obj 365 100 r analysis-command;
#X obj 605 300 r analysis-command;
#X obj 85 300 r analysis-command;
#X obj 317 141 barkSpec \$0-sample 0.5;
#X obj 57 366 t b l;
#X msg 57 453 clip -0.6 1;
#X obj 57 478 tabletool cepstrum-graph;
#X obj 317 364 list prepend 0;
#X obj 365 300 r analysis-command;
#X obj 317 387 s dct-graph;
#X obj 317 341 dct \$0-sample;
#X obj 557 164 list prepend 0;
#X obj 605 100 r analysis-command;
#X obj 557 187 s melspec-graph;
#X obj 557 141 melSpec \$0-sample;
#X obj 777 364 list prepend 0;
#X obj 825 300 r analysis-command;
#X obj 777 341 mfcc \$0-sample;
#X obj 777 387 s mfcc-graph;
#X connect 0 0 1 0;
#X connect 2 0 5 0;
#X connect 3 0 4 0;
#X connect 6 0 7 0;
#X connect 8 0 0 0;
#X connect 9 0 3 0;
#X connect 10 0 16 0;
#X connect 11 0 8 0;
#X connect 12 0 15 0;
#X connect 13 0 9 0;
#X connect 14 0 10 0;
#X connect 15 0 2 0;
#X connect 16 0 17 0;
#X connect 16 1 6 0;
#X connect 17 0 18 0;
#X connect 19 0 21 0;
#X connect 20 0 22 0;
#X connect 22 0 19 0;
#X connect 23 0 25 0;
#X connect 24 0 26 0;
#X connect 26 0 23 0;
#X connect 27 0 30 0;
#X connect 28 0 29 0;
#X connect 29 0 27 0;
#X restore 41 249 pd multi-dimensional-feature-analyses;
#X text 39 33 MULTI-DIMENSIONAL FEATURES:;
#X text 695 469 timbreID - William Brent 2017;
#N canvas 53 154 947 428 Bark-spectrum-features 0;
#X obj 39 83 nbx 5 32 -1e+37 1e+37 0 0 empty bark-brightness-display
empty 0 -8 0 32 -262144 -1 -1 0.707151 256;
#X text 37 63 Brightness;
#X obj 259 83 nbx 5 32 -1e+37 1e+37 0 0 empty bark-centroid-display
empty 0 -8 0 32 -262144 -1 -1 11.1831 256;
#X obj 479 83 nbx 5 32 -1e+37 1e+37 0 0 empty bark-flatness-display
empty 0 -8 0 32 -262144 -1 -1 0.515832 256;
#X obj 719 83 nbx 5 32 -1e+37 1e+37 0 0 empty bark-flux-display empty
0 -8 0 32 -262144 -1 -1 0.35692 256;
#X text 257 63 Centroid;
#X text 477 63 Flatness;
#X text 717 63 Flux;
#X obj 259 173 nbx 5 32 -1e+37 1e+37 0 0 empty bark-kurtosis-display
empty 0 -8 0 32 -262144 -1 -1 2.15653 256;
#X obj 479 173 nbx 5 32 -1e+37 1e+37 0 0 empty bark-rolloff-display
empty 0 -8 0 32 -262144 -1 -1 15.5 256;
#X obj 719 173 nbx 5 32 -1e+37 1e+37 0 0 empty bark-skewness-display
empty 0 -8 0 32 -262144 -1 -1 -0.405175 256;
#X obj 479 263 nbx 5 32 -1e+37 1e+37 0 0 empty bark-spread-display
empty 0 -8 0 32 -262144 -1 -1 5.14646 256;
#X text 257 153 Kurtosis;
#X text 477 153 Rolloff;
#X text 717 153 Skewness;
#X text 477 243 Spread;
#X text 37 153 Irregularity;
#X obj 39 173 nbx 5 32 -1e+37 1e+37 0 0 empty bark-irreg-display empty
0 -8 0 32 -262144 -1 -1 0.219835 256;
#X obj 39 263 nbx 7 32 -1e+37 1e+37 0 0 empty bark-spec-slope-display
empty 0 -8 0 32 -262144 -1 -1 -0.0102467 256;
#X text 37 243 Slope;
#X text 37 33 BARK SPECTRUM FEATURES:;
#N canvas 320 83 1027 596 bark-spectrum-analyses 0;
#X obj 835 270 r analysis-command;
#X obj 315 440 r analysis-command;
#X obj 95 80 r analysis-command;
#X obj 345 80 r analysis-command;
#X obj 595 80 r analysis-command;
#X obj 825 80 r analysis-command;
#X obj 585 270 r analysis-command;
#X obj 87 272 r analysis-command;
#X obj 325 270 r analysis-command;
#X obj 85 440 r analysis-command;
#X obj 47 121 barkSpecBrightness \$0-sample;
#X obj 297 121 barkSpecCentroid \$0-sample;
#X obj 547 121 barkSpecFlatness \$0-sample;
#X obj 787 121 barkSpecFlux \$0-sample;
#X obj 277 311 barkSpecKurtosis \$0-sample;
#X obj 47 312 barkSpecIrregularity \$0-sample;
#X obj 547 311 barkSpecRolloff \$0-sample;
#X obj 797 311 barkSpecSkewness \$0-sample;
#X obj 47 481 barkSpecSlope \$0-sample;
#X obj 277 481 barkSpecSpread \$0-sample;
#X obj 47 147 s bark-brightness-display;
#X obj 297 147 s bark-centroid-display;
#X obj 547 147 s bark-flatness-display;
#X obj 787 147 s bark-flux-display;
#X obj 277 340 s bark-kurtosis-display;
#X obj 47 338 s bark-irreg-display;
#X obj 277 510 s bark-spread-display;
#X obj 47 510 s bark-spec-slope-display;
#X obj 797 340 s bark-skewness-display;
#X obj 547 340 s bark-rolloff-display;
#X connect 0 0 17 0;
#X connect 1 0 19 0;
#X connect 2 0 10 0;
#X connect 3 0 11 0;
#X connect 4 0 12 0;
#X connect 5 0 13 0;
#X connect 6 0 16 0;
#X connect 7 0 15 0;
#X connect 8 0 14 0;
#X connect 9 0 18 0;
#X connect 10 0 20 0;
#X connect 11 0 21 0;
#X connect 12 0 22 0;
#X connect 13 0 23 0;
#X connect 14 0 24 0;
#X connect 15 0 25 0;
#X connect 16 0 29 0;
#X connect 17 0 28 0;
#X connect 18 0 27 0;
#X connect 19 0 26 0;
#X restore 39 343 pd bark-spectrum-analyses;
#X restore 41 569 pd Bark-spectrum-features;
#N canvas 0 22 450 300 (subpatch) 0;
#X array melspec-graph 38 float 0;
#X coords 0 1 37 0 200 140 1 0 0;
#X restore 731 99 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array mfcc-graph 38 float 0;
#X coords 0 1 37 -1 200 140 1 0 0;
#X restore 731 309 graph;
#N canvas 621 228 780 352 sound-event-features 0;
#X obj 43 119 nbx 5 32 -1e+37 1e+37 0 0 empty ceps-pitch-display empty
0 -8 0 32 -262144 -1 -1 51.9725 256;
#X text 41 99 Cepstrum pitch;
#X obj 253 189 nbx 5 32 -1e+37 1e+37 0 0 empty sigmund-pitch-display
empty 0 -8 0 32 -262144 -1 -1 -1500 256;
#X text 251 169 sigmund~ pitch;
#X obj 43 189 nbx 5 32 -1e+37 1e+37 0 0 empty sigmund-env-display empty
0 -8 0 32 -262144 -1 -1 60.4787 256;
#X text 41 169 sigmund~ env;
#X text 41 39 SOUND EVENT FEATURES:;
#N canvas 519 28 703 369 sound-event-analyses 0;
#X obj 433 153 s ceps-pitch-display;
#X obj 433 117 cepstrumPitch \$0-sample;
#X obj 433 69 r analysis-command;
#X obj 83 293 s sigmund-pitch-display;
#X obj 273 263 s sigmund-env-display;
#X obj 83 227 sigmund~ -t pitch env;
#X msg 83 189 list \$3-sample \$2 \$1 44100 0;
#X obj 83 159 pack f f \$0;
#X obj 83 99 i;
#X obj 83 19 r analysis-command;
#X obj 83 64 unpack s f f;
#X obj 83 124 max 0;
#X connect 1 0 0 0;
#X connect 2 0 1 0;
#X connect 5 0 3 0;
#X connect 5 1 4 0;
#X connect 6 0 5 0;
#X connect 7 0 6 0;
#X connect 8 0 11 0;
#X connect 9 0 10 0;
#X connect 10 1 8 0;
#X connect 10 2 7 1;
#X connect 11 0 7 0;
#X restore 43 269 pd sound-event-analyses;
#X text 464 35 Note that non-real-time versions of [bark~] and [attackTime~]
exist \, but aren't demonstrated well in this patch because it involves
scrubbing through an audio file \, not searching for onsets and their
attack times. See the respective help files for more info on those
two objects:, f 25;
#X obj 466 249 bark;
#X obj 566 249 attackTime;
#X restore 41 599 pd sound-event-features;
#X obj 44 659 hsl 768 30 0 10173 0 0 location-set-set location-set-set-properties
Scrub-bar -2 -8 0 12 -262144 -1 -1 36089 1;
#X obj 519 601 nbx 10 32 0 1e+37 0 0 location-set location-set-set
empty 0 -8 0 32 -262144 -1 -1 4786.62 256;
#N canvas 0 22 450 300 (subpatch) 0;
#X array waveform 2048 float 0;
#X coords 0 1 2048 -1 200 140 1 0 0;
#X restore 41 99 graph;
#N canvas 498 224 786 413 pvoc-controls 0;
#X floatatom 154 166 3 0 0 0 - speed-set -, f 3;
#X floatatom 42 168 7 0 0 0 - location-set -, f 7;
#N canvas 260 23 647 768 phase-tables 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array prev-imag 4096 float 0;
#X coords 0 1000 4096 -1000 400 300 1;
#X restore 169 326 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array prev-real 4096 float 0;
#X coords 0 500 4096 -500 400 300 1;
#X restore 170 17 graph;
#X restore 427 287 pd phase-tables;
#X text 151 147 hundredths;
#X text 376 142 normal;
#N canvas 0 110 565 454 hann-window 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-hann 2048 float 0;
#X coords 0 1 2047 0 300 100 1;
#X restore 82 311 graph;
#X obj 378 165 osc~;
#X obj 378 190 *~ -0.5;
#X obj 378 214 +~ 0.5;
#X obj 331 247 tabwrite~ \$0-hann;
#X obj 37 88 r window-size;
#X obj 38 173 /;
#X obj 127 142 samplerate~;
#X obj 38 251 s window-sec;
#X obj 177 204 swap;
#X obj 177 228 /;
#X obj 177 252 s window-hz;
#X obj 49 201 * 1000;
#X obj 49 228 s window-msec;
#X obj 38 115 t f b f;
#X msg 173 92 resize \$1;
#X obj 173 116 s \$0-hann;
#X obj 330 105 r window-hz;
#X msg 382 130 0;
#X obj 330 131 t f b;
#X text 15 8 calculate Hann window table (variable window size) and
constants window-hz (fundamental frequency of analysis) \, window-sec
and window-msec (analysis window size in seconds and msec).;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 5 0 14 0;
#X connect 6 0 8 0;
#X connect 6 0 12 0;
#X connect 7 0 6 1;
#X connect 7 0 9 1;
#X connect 9 0 10 0;
#X connect 9 1 10 1;
#X connect 10 0 11 0;
#X connect 12 0 13 0;
#X connect 14 0 6 0;
#X connect 14 0 9 0;
#X connect 14 1 7 0;
#X connect 14 2 15 0;
#X connect 15 0 16 0;
#X connect 17 0 19 0;
#X connect 18 0 1 1;
#X connect 19 0 1 0;
#X connect 19 1 4 0;
#X connect 19 1 18 0;
#X restore 427 311 pd hann-window;
#N canvas 242 168 777 489 insample 0;
#X obj 28 43 r read-sample;
#X obj 28 94 unpack s f;
#X obj 28 214 soundfiler;
#X obj 442 12 loadbang;
#X obj 28 120 t s b;
#X obj 84 119 symbol \$0-sample;
#X obj 28 155 pack s s;
#X obj 83 66 44100;
#X obj 28 67 t a b;
#X obj 38 238 s \$0-samplength;
#X obj 125 94 s \$0-insamprate;
#X obj 28 277 /;
#X obj 28 301 * 1000;
#X obj 68 374 s \$0-samp-msec;
#X obj 66 277 r \$0-insamprate;
#X obj 282 12 inlet;
#X obj 282 34 openpanel;
#X obj 282 59 s read-sample;
#X msg 28 430 \; location-set-set-properties range 0 \$1 \;;
#X obj 28 399 - 1;
#X msg 28 190 read -resize -maxsize 4.41e+07 \$1 \$2;
#X msg 441 36 \; read-sample ./audio/deutsch.wav \;;
#X obj 28 369 i;
#X obj 434 154 table \$0-sample;
#X connect 0 0 8 0;
#X connect 1 0 4 0;
#X connect 1 1 10 0;
#X connect 2 0 9 0;
#X connect 2 0 11 0;
#X connect 3 0 21 0;
#X connect 4 0 6 0;
#X connect 4 1 5 0;
#X connect 5 0 6 1;
#X connect 6 0 20 0;
#X connect 7 0 10 0;
#X connect 8 0 1 0;
#X connect 8 1 7 0;
#X connect 11 0 12 0;
#X connect 12 0 13 0;
#X connect 12 0 22 0;
#X connect 14 0 11 1;
#X connect 15 0 16 0;
#X connect 16 0 17 0;
#X connect 19 0 18 0;
#X connect 20 0 2 0;
#X connect 22 0 19 0;
#X restore 428 263 pd insample;
#X floatatom 539 263 10 0 0 0 - #0-samp-msec -, f 10;
#X obj 42 190 s location;
#X obj 154 190 s speed;
#X obj 249 169 bng 15 250 50 0 empty empty empty 0 -6 0 8 -262144 -1
-1;
#X obj 249 191 s rewind;
#X msg 332 119 200;
#X msg 332 141 100;
#X text 373 118 contract;
#X text 377 163 expand;
#X text 42 113 location;
#X text 39 129 (stops;
#X text 44 144 motion);
#X text 152 131 motion in;
#X text 631 262 length \, msec;
#X floatatom 594 202 5 0 0 0 - window-size -, f 5;
#X msg 594 90 512;
#X msg 594 112 1024;
#X msg 594 134 2048;
#X msg 594 156 4096;
#X obj 594 178 s window-size;
#X text 594 57 window size \,;
#X text 594 72 samples;
#X text 635 89 <- set;
#X text 647 202 (check);
#X obj 332 190 s auto;
#X obj 428 243 bng 15 250 50 0 empty open-file Open-file 24 6 0 12
-262144 -1 -1;
#X msg 332 163 20;
#X obj 92 275 r location-set;
#X msg 92 298 set \$1;
#X obj 92 321 s location-set-set-properties;
#X connect 0 0 9 0;
#X connect 1 0 8 0;
#X connect 10 0 11 0;
#X connect 12 0 31 0;
#X connect 13 0 31 0;
#X connect 22 0 26 0;
#X connect 23 0 26 0;
#X connect 24 0 26 0;
#X connect 25 0 26 0;
#X connect 32 0 6 0;
#X connect 33 0 31 0;
#X connect 34 0 35 0;
#X connect 35 0 36 0;
#X restore 281 534 pd pvoc-controls;
#X obj 281 514 bng 15 250 50 0 open-file empty Open-file 17 7 0 12
-262144 -1 -1;
#N canvas 199 40 821 693 fft-analysis 0;
#X obj 51 477 *~;
#X obj 18 477 *~;
#X obj 18 499 -~;
#X obj 167 475 *~;
#X obj 136 475 *~;
#X obj 136 497 +~;
#X obj 109 193 *~;
#X obj 78 193 *~;
#X obj 50 193 *~;
#X obj 19 193 *~;
#X obj 19 218 +~;
#X obj 127 379 *~;
#X obj 20 622 *~;
#X obj 238 430 rfft~;
#X obj 108 161 rfft~;
#X obj 19 564 rifft~;
#X obj 21 646 outlet~;
#X obj 97 379 *~;
#X obj 97 401 +~;
#X obj 124 218 -~;
#X obj 18 431 *~;
#X obj 51 432 *~;
#X obj 127 622 r window-size;
#X obj 426 595 r window-size;
#X obj 426 644 block~;
#X obj 19 349 +~ 1e-15;
#X obj 19 598 *~;
#X obj 52 598 tabreceive~ \$0-hann;
#X obj 127 643 expr 2/(3*$f1);
#X obj 591 563 loadbang;
#X msg 426 619 set \$1 4;
#X obj 97 425 q8_rsqrt~;
#N canvas 148 22 1006 799 read-windows 0;
#X obj 18 693 *~;
#X obj 364 448 r window-size;
#X obj 156 300 f;
#X obj 102 91 r window-size;
#X obj 102 139 /;
#X obj 195 695 *~;
#X obj 156 255 bang~;
#X obj 17 551 line~;
#X obj 102 164 * 1000;
#X obj 288 224 r speed;
#X obj 178 276 r location;
#X obj 198 302 +;
#X obj 288 272 *;
#X obj 183 470 +;
#X obj 143 446 t f f;
#X msg 17 523 \$1 \, \$2 \$3;
#X obj 17 496 pack 0 0 0;
#X obj 178 371 / 1000;
#X obj 156 394 *;
#X text 188 394 reading location (samples);
#X obj 51 597 / 4;
#X obj 288 245 * 0.01;
#X floatatom 364 498 7 0 0 0 - - -, f 7;
#X obj 364 474 *;
#X obj 502 347 r transpo;
#X obj 502 369 * 0.01;
#X obj 504 390 + 69;
#X obj 505 411 mtof;
#X obj 505 433 / 440;
#X obj 399 474 t b f;
#X obj 19 719 outlet~;
#X obj 195 720 outlet~;
#X obj 218 664 tabreceive~ \$0-hann;
#X obj 803 386 r location;
#X msg 803 409 0;
#X obj 803 432 s speed;
#X obj 768 508 r speed;
#X msg 768 532 set \$1;
#X obj 768 557 s speed-set;
#X text 432 498 stretched window size (samples);
#X obj 877 507 r transpo;
#X msg 877 533 set \$1;
#X obj 877 558 s transpo-set;
#X obj 808 94 r location;
#X msg 826 278 set \$1;
#X obj 808 140 t b f;
#X obj 826 257 f;
#X obj 754 171 int;
#X obj 754 203 sel 0;
#X msg 813 174 1;
#X msg 813 197 0;
#X obj 754 228 del 300;
#X obj 17 637 tabread4~ \$0-sample;
#X obj 194 637 tabread4~ \$0-sample;
#X obj 178 347 r \$0-insamprate;
#X obj 528 586 r rewind;
#X msg 528 744 \; location \$1;
#X floatatom 111 187 5 0 0 0 - - -, f 5;
#X obj 102 115 t f b;
#X obj 142 139 samplerate~;
#X obj 102 208 / 4;
#X obj 233 306 s see-loc;
#X obj 817 116 r see-loc;
#X obj 193 420 / 2;
#X obj 156 420 -;
#X text 229 417 back up 1/2 window;
#X obj 16 597 -~;
#X text 43 6 Read two windows out of the recorded sample \, one 1/4
ahead of the other. The mid point of the front window is specified
by "location". If "speed" is nonzero \, "location" automatically precesses.
;
#X obj 528 720 * -0.5;
#X text 91 587 "back" window 1/4 cycle behind "front" one;
#X text 137 205 computation period (msec) for overlap of 4;
#X text 164 186 msec in a window;
#X obj 528 666 /;
#X obj 528 691 * 1000;
#X obj 528 642 t f b;
#X obj 568 666 samplerate~;
#X obj 528 619 f;
#X msg 845 711 \; rewind bang \; speed \$1;
#X obj 845 684 r auto;
#X obj 730 685 r no-detune;
#X msg 730 707 \; detune 0;
#X text 321 280 loop to precess the location according;
#X text 320 296 to the "speed" parameter.;
#X text 611 31 if location changes \, update number box;
#X text 610 50 in main window via "location-set" \, but;
#X text 613 69 taking care to limit frequency of updates.;
#X text 756 462 reflect control changes;
#X text 756 479 in main window.;
#X text 754 344 setting location by hand;
#X text 752 362 sets speed to zero.;
#X text 760 653 misc controls;
#X text 496 527 "rewind" control takes us;
#X text 499 545 to a location depending on;
#X text 499 564 stretched window size.;
#X obj 593 457 t b f;
#X obj 617 395 samplerate~;
#X obj 593 348 r \$0-insamprate;
#X obj 593 418 /;
#X obj 505 455 * 1;
#X text 494 312 desired transposition and sample;
#X text 494 329 rate correction for soundfile;
#X obj 593 370 t f b;
#X obj 143 525 s table-read-point;
#X obj 143 501 change;
#X obj 854 308 s location-set;
#X connect 0 0 30 0;
#X connect 1 0 23 0;
#X connect 2 0 11 0;
#X connect 2 0 18 0;
#X connect 3 0 58 0;
#X connect 4 0 8 0;
#X connect 5 0 31 0;
#X connect 6 0 2 0;
#X connect 7 0 66 0;
#X connect 7 0 53 0;
#X connect 8 0 57 0;
#X connect 8 0 60 0;
#X connect 9 0 21 0;
#X connect 10 0 2 1;
#X connect 11 0 2 1;
#X connect 11 0 61 0;
#X connect 12 0 11 1;
#X connect 13 0 16 1;
#X connect 14 0 16 0;
#X connect 14 0 103 0;
#X connect 14 1 13 0;
#X connect 15 0 7 0;
#X connect 16 0 15 0;
#X connect 17 0 18 1;
#X connect 18 0 64 0;
#X connect 20 0 66 1;
#X connect 21 0 12 0;
#X connect 22 0 20 0;
#X connect 22 0 13 1;
#X connect 22 0 63 0;
#X connect 22 0 76 1;
#X connect 23 0 22 0;
#X connect 24 0 25 0;
#X connect 25 0 26 0;
#X connect 26 0 27 0;
#X connect 27 0 28 0;
#X connect 28 0 98 0;
#X connect 29 0 23 0;
#X connect 29 1 23 1;
#X connect 32 0 5 1;
#X connect 32 0 0 1;
#X connect 33 0 34 0;
#X connect 34 0 35 0;
#X connect 36 0 37 0;
#X connect 37 0 38 0;
#X connect 40 0 41 0;
#X connect 41 0 42 0;
#X connect 43 0 45 0;
#X connect 45 0 47 0;
#X connect 45 1 46 1;
#X connect 46 0 44 0;
#X connect 47 0 48 0;
#X connect 48 0 49 0;
#X connect 48 0 51 0;
#X connect 49 0 47 1;
#X connect 50 0 47 1;
#X connect 51 0 50 0;
#X connect 51 0 46 0;
#X connect 52 0 0 0;
#X connect 53 0 5 0;
#X connect 54 0 17 0;
#X connect 55 0 76 0;
#X connect 58 0 4 0;
#X connect 58 1 59 0;
#X connect 59 0 4 1;
#X connect 60 0 16 2;
#X connect 60 0 12 1;
#X connect 62 0 45 0;
#X connect 63 0 64 1;
#X connect 64 0 14 0;
#X connect 66 0 52 0;
#X connect 68 0 56 0;
#X connect 72 0 73 0;
#X connect 73 0 68 0;
#X connect 74 0 72 0;
#X connect 74 1 75 0;
#X connect 75 0 72 1;
#X connect 76 0 74 0;
#X connect 78 0 77 0;
#X connect 79 0 80 0;
#X connect 94 0 98 0;
#X connect 94 1 98 1;
#X connect 95 0 97 1;
#X connect 96 0 101 0;
#X connect 97 0 94 0;
#X connect 98 0 29 0;
#X connect 101 0 97 0;
#X connect 101 1 95 0;
#X connect 103 0 102 0;
#X restore 109 133 pd read-windows;
#X obj 137 543 tabsend~ prev-imag;
#X obj 136 567 tabsend~ prev-real;
#X obj 20 8 tabreceive~ prev-real;
#X obj 73 29 tabreceive~ prev-imag;
#X text 272 5 recall previous output amplitude. Its phase will be added
to the phase difference we measure from two windows in the the recorded
sound.;
#X obj 121 69 *~;
#X obj 89 69 *~;
#X obj 89 91 +~;
#X obj 159 94 q8_rsqrt~;
#X obj 159 71 +~ 1e-20;
#X obj 73 119 *~;
#X obj 19 118 *~;
#X obj 181 290 r lock;
#X obj 29 245 lrshift~ 1;
#X obj 24 269 lrshift~ -1;
#X obj 141 245 lrshift~ 1;
#X obj 133 269 lrshift~ -1;
#X obj 35 300 *~;
#X obj 159 312 *~;
#X obj 19 325 +~;
#X obj 125 331 +~;
#X text 247 66 divide by the magnitude to make a unit-magnitude complex
amplitude (phase only). The 1e-20 is to prevent overflows. q8_rsqrt~
is reciprocal square root.;
#X text 247 165 Take FT of the window in back. Multiply its conjugate
by the normalized previous output. The result has the magnitude of
the input sound and phase (previous output phase) minus (back window
phase).;
#X text 249 370 Normalize again \, this time taking care to salt each
channel with 1e-15 so that we get a unit complex number even if everything
was zero heretofore.;
#X text 288 427 Now take the FT of the forward window and multiply
it by the unit complex number from above. The magnitude will be that
of the forward window and the phase will be the previous output phase
plus the phase difference between the two analysis windows -- except
that if "lock" is on \, they will be modified to agree progressively
better with the inter-channel phase relationships of the input.;
#X text 249 242 If "lock" is on \, encourage neighboring channels to
stay in phase by adding the two neighboring complex amplitudes. The
result will tend toward the channel with the strongest amplitude. If
the phase relationships between channels in the output and those in
the input are in parallel \, then neighboring channels of the quotient
will all have the same phase and this will not change any phases. (lrshift
shifts the signal to the left or right depending on its argument.)
;
#X text 387 560 'set' message to block;
#X text 390 577 allows variable size;
#X text 259 126 Read two windows \, one 1/4 length behind the other
\, of the input sound \, with Hann window function (see inside).;
#X msg 591 589 \; pd dsp 1 \; window-size 2048 \; transpo 0 \; rewind
bang;
#X connect 0 0 2 1;
#X connect 1 0 2 0;
#X connect 2 0 34 0;
#X connect 2 0 15 0;
#X connect 3 0 5 1;
#X connect 4 0 5 0;
#X connect 5 0 33 0;
#X connect 5 0 15 1;
#X connect 6 0 19 1;
#X connect 7 0 19 0;
#X connect 8 0 10 1;
#X connect 9 0 10 0;
#X connect 10 0 47 0;
#X connect 10 0 46 0;
#X connect 10 0 52 0;
#X connect 11 0 18 1;
#X connect 12 0 16 0;
#X connect 13 0 1 1;
#X connect 13 0 3 1;
#X connect 13 1 0 1;
#X connect 13 1 4 1;
#X connect 14 0 9 1;
#X connect 14 0 7 1;
#X connect 14 1 6 1;
#X connect 14 1 8 1;
#X connect 15 0 26 0;
#X connect 17 0 18 0;
#X connect 18 0 31 0;
#X connect 19 0 48 0;
#X connect 19 0 49 0;
#X connect 19 0 53 0;
#X connect 20 0 1 0;
#X connect 20 0 4 0;
#X connect 21 0 0 0;
#X connect 21 0 3 0;
#X connect 22 0 28 0;
#X connect 23 0 30 0;
#X connect 25 0 17 1;
#X connect 25 0 17 0;
#X connect 25 0 20 0;
#X connect 26 0 12 0;
#X connect 27 0 26 1;
#X connect 28 0 12 1;
#X connect 29 0 62 0;
#X connect 30 0 24 0;
#X connect 31 0 20 1;
#X connect 31 0 21 1;
#X connect 32 0 14 0;
#X connect 32 1 13 0;
#X connect 35 0 39 1;
#X connect 35 0 39 0;
#X connect 35 0 44 0;
#X connect 36 0 38 1;
#X connect 36 0 38 0;
#X connect 36 0 43 0;
#X connect 38 0 40 1;
#X connect 39 0 40 0;
#X connect 40 0 42 0;
#X connect 41 0 43 1;
#X connect 41 0 44 1;
#X connect 42 0 41 0;
#X connect 43 0 8 0;
#X connect 43 0 7 0;
#X connect 44 0 9 0;
#X connect 44 0 6 0;
#X connect 45 0 50 1;
#X connect 45 0 51 1;
#X connect 46 0 50 0;
#X connect 47 0 50 0;
#X connect 48 0 51 0;
#X connect 49 0 51 0;
#X connect 50 0 52 1;
#X connect 51 0 53 1;
#X connect 52 0 25 0;
#X connect 53 0 11 0;
#X connect 53 0 11 1;
#X connect 53 0 21 0;
#X restore 281 564 pd fft-analysis;
#X obj 281 599 volume~;
#X text 516 576 Fine control (milliseconds);
#X text 38 700 Rough control: click and drag to scrub through the audio
;
#X connect 22 0 23 0;
