#N canvas 1114 533 438 267 10;
#N canvas 0 22 450 300 players 0;
#N canvas 879 621 688 474 set-sample-and-grain 0;
#X obj 401 226 tabread frame-locations;
#X obj 74 45 r trig-sound;
#X obj 74 406 outlet;
#X obj 423 266 s current-playback-sample;
#X obj 235 215 s current-playback-frame;
#X obj 214 257 tabread frame-start-samp;
#X obj 74 85 t b f f;
#X obj 81 235 r num-player-voices;
#X obj 51 208 + 1;
#X obj 21 218 f;
#X obj 51 235 %;
#X obj 74 376 pack f f f;
#X connect 0 0 3 0;
#X connect 0 0 11 2;
#X connect 1 0 6 0;
#X connect 5 0 11 1;
#X connect 6 0 9 0;
#X connect 6 1 4 0;
#X connect 6 1 5 0;
#X connect 6 2 0 0;
#X connect 7 0 10 1;
#X connect 8 0 10 0;
#X connect 9 0 8 0;
#X connect 9 0 11 0;
#X connect 10 0 9 1;
#X connect 11 0 2 0;
#X restore 72 57 pd set-sample-and-grain;
#X msg 72 93 \; play-\$1 \$2 \$3 \;;
#X obj 176 160 clone grain-player-unit 32;
#X connect 0 0 1 0;
#X restore 48 99 pd players;
#N canvas 879 515 409 350 timbreID 0;
#X obj 82 85 r \$0-tID;
#X obj 82 152 timbreID;
#X floatatom 82 174 5 0 0 0 - - -, f 5;
#X obj 127 221 s feature-list;
#X obj 127 191 route feature_list;
#X msg 216 95 print;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 3 4 0;
#X connect 4 0 3 0;
#X connect 5 0 1 0;
#X restore 48 79 pd timbreID;
#N canvas 707 92 538 589 init 0;
#X obj 43 34 loadbang;
#X msg 43 344 \; pd dsp 1 \;;
#X obj 244 115 s lb1;
#X obj 226 141 s lb2;
#X obj 208 170 s lb3;
#X obj 43 55 t b b b b b b;
#X obj 188 200 s lb4;
#X obj 168 230 s lb5;
#X obj 253 251 r lb5;
#X msg 253 281 \; samplerate 44100 \; num-player-voices 32 \; max-sample-length
2.646e+06 \; audio-process-loadbang bang \;;
#X connect 0 0 5 0;
#X connect 5 0 1 0;
#X connect 5 1 7 0;
#X connect 5 2 6 0;
#X connect 5 3 4 0;
#X connect 5 4 3 0;
#X connect 5 5 2 0;
#X connect 8 0 9 0;
#X restore 48 29 pd init;
#X obj 220 153 dac~;
#X obj 220 108 catch~ grain-bus;
#N canvas 1413 443 512 277 analysis 0;
#N canvas 831 367 835 602 analysis 0;
#X obj 425 294 s \$0-tID;
#X obj 102 537 outlet;
#X msg 206 425 normalize 1;
#X obj 206 446 s \$0-tID;
#X obj 213 46 inlet;
#X text 299 424 Normalize the analysis feature database when finished.
;
#X text 367 106 First \, clear timbreID's memory and reset the instance
counter;
#X obj 299 299 list length;
#X obj 284 324 f;
#N canvas 990 222 596 657 prep-analysis-message 0;
#X obj 83 17 inlet;
#X obj 102 197 f;
#X obj 142 197 + 1;
#X msg 173 167 0;
#X obj 102 327 until;
#X obj 102 384 f;
#X obj 102 143 until;
#X obj 104 39 r num-samples;
#X obj 83 66 f;
#X msg 102 524 analyze \$1 \$2;
#X obj 102 497 pack f f;
#X obj 102 220 t f f;
#X obj 219 460 r window-size;
#X obj 215 312 s current-analysis-sample;
#X obj 102 586 outlet;
#X obj 102 257 tabread sample-frames;
#X obj 142 384 + 1;
#X obj 102 426 tabread frame-start-samp;
#X obj 83 103 t b f b;
#X obj 32 546 outlet;
#X obj 369 440 r full-sample-mode;
#X obj 369 462 swap 1;
#X obj 369 484 -;
#X obj 102 546 spigot;
#X obj 102 406 t f b;
#X obj 242 546 spigot;
#X connect 0 0 8 0;
#X connect 1 0 2 0;
#X connect 1 0 11 0;
#X connect 2 0 1 1;
#X connect 3 0 1 1;
#X connect 3 0 5 1;
#X connect 4 0 5 0;
#X connect 5 0 16 0;
#X connect 5 0 24 0;
#X connect 6 0 1 0;
#X connect 7 0 8 1;
#X connect 8 0 18 0;
#X connect 9 0 23 0;
#X connect 10 0 9 0;
#X connect 11 0 15 0;
#X connect 11 1 13 0;
#X connect 12 0 10 1;
#X connect 15 0 4 0;
#X connect 16 0 5 1;
#X connect 17 0 10 0;
#X connect 18 0 19 0;
#X connect 18 1 6 0;
#X connect 18 2 3 0;
#X connect 20 0 21 0;
#X connect 20 0 25 1;
#X connect 21 0 22 0;
#X connect 21 1 22 1;
#X connect 22 0 23 1;
#X connect 23 0 14 0;
#X connect 24 0 17 0;
#X connect 24 1 25 0;
#X connect 25 0 14 0;
#X restore 284 220 pd prep-analysis-message;
#X obj 310 180 s \$0-tID;
#X msg 310 159 clear;
#X obj 367 142 s reset-instance-count;
#X obj 213 73 t b b b b b b b b;
#N canvas 0 22 450 300 export-database 0;
#X obj 97 195 s \$0-tID;
#X obj 97 95 inlet;
#X msg 97 144 write_text ../database/timbre-space-db.txt;
#X connect 1 0 2 0;
#X connect 2 0 0 0;
#X restore 257 389 pd export-database;
#N canvas 0 22 450 300 export-normalized-database 0;
#X obj 97 195 s \$0-tID;
#X obj 97 95 inlet;
#X msg 97 144 write_text ../database/timbre-space-norm-db.txt;
#X connect 1 0 2 0;
#X connect 2 0 0 0;
#X restore 158 486 pd export-normalized-database;
#N canvas 778 496 1038 497 multiple-analyses 0;
#X obj 56 38 inlet;
#N canvas 153 113 865 644 feature-0-2 0;
#X obj 201 56 inlet;
#X obj 189 560 outlet;
#X obj 491 315 list append;
#X obj 189 459 list append;
#X obj 320 274 f;
#X obj 350 274 + 1;
#X msg 335 239 0;
#X obj 335 217 r reset-instance-count;
#X obj 491 80 r samplerate;
#X msg 491 101 samplerate \$1;
#X obj 591 80 r current-analysis-sample;
#X msg 591 101 set tID-sample-\$1;
#X obj 320 365 list append;
#X obj 84 402 f;
#X obj 99 379 r current-analysis-sample;
#X obj 201 106 t b b a;
#X obj 583 247 inlet;
#X obj 491 154 barkSpecBrightness tID-sample--1;
#X connect 0 0 15 0;
#X connect 2 0 12 1;
#X connect 3 0 1 0;
#X connect 4 0 5 0;
#X connect 4 0 12 0;
#X connect 5 0 4 1;
#X connect 6 0 4 1;
#X connect 7 0 6 0;
#X connect 8 0 9 0;
#X connect 9 0 17 0;
#X connect 10 0 11 0;
#X connect 11 0 17 0;
#X connect 12 0 3 1;
#X connect 13 0 3 0;
#X connect 14 0 13 1;
#X connect 15 0 13 0;
#X connect 15 1 4 0;
#X connect 15 2 17 0;
#X connect 16 0 2 1;
#X connect 17 0 2 0;
#X restore 43 403 pd feature-0-2;
#N canvas 281 176 1159 470 features-3-6 0;
#X obj 66 48 inlet;
#X obj 644 263 list append;
#X obj 46 363 list append;
#X obj 400 293 list append;
#X obj 835 164 r samplerate;
#X msg 835 185 samplerate \$1;
#X obj 230 323 list append;
#X obj 935 164 r current-analysis-sample;
#X msg 935 185 set tID-sample-\$1;
#X obj 66 78 t a a a a;
#X obj 46 385 outlet;
#X obj 707 233 inlet;
#X obj 400 202 barkSpecFlux tID-sample--1 0.5 256;
#X obj 46 202 barkSpecCentroid tID-sample--1;
#X obj 230 202 barkSpecFlatness tID-sample--1;
#X obj 644 202 barkSpecIrregularity tID-sample--1;
#X connect 0 0 9 0;
#X connect 1 0 3 1;
#X connect 2 0 10 0;
#X connect 3 0 6 1;
#X connect 4 0 5 0;
#X connect 5 0 12 0;
#X connect 5 0 13 0;
#X connect 5 0 15 0;
#X connect 6 0 2 1;
#X connect 7 0 8 0;
#X connect 8 0 12 0;
#X connect 8 0 13 0;
#X connect 8 0 14 0;
#X connect 8 0 15 0;
#X connect 9 0 13 0;
#X connect 9 1 14 0;
#X connect 9 2 12 0;
#X connect 9 3 15 0;
#X connect 11 0 1 1;
#X connect 12 0 3 0;
#X connect 13 0 2 0;
#X connect 14 0 6 0;
#X connect 15 0 1 0;
#X restore 89 345 pd features-3-6;
#X obj 43 440 outlet;
#X text 501 106 0: sample number;
#X text 501 126 1: frame number;
#N canvas 0 22 978 430 features-7-9 0;
#X obj 56 301 list append;
#X obj 226 43 t a a a;
#X obj 56 323 outlet;
#X obj 226 23 inlet;
#X obj 531 238 inlet;
#X obj 246 261 list append;
#X obj 426 221 list append;
#X obj 646 162 r samplerate;
#X msg 646 183 samplerate \$1;
#X obj 756 162 r current-analysis-sample;
#X msg 756 183 set tID-sample-\$1;
#X obj 426 200 barkSpecSkewness tID-sample--1;
#X obj 246 200 barkSpecRolloff tID-sample--1;
#X obj 56 200 barkSpecKurtosis tID-sample--1;
#X connect 0 0 2 0;
#X connect 1 0 13 0;
#X connect 1 1 12 0;
#X connect 1 2 11 0;
#X connect 3 0 1 0;
#X connect 4 0 6 1;
#X connect 5 0 0 1;
#X connect 6 0 5 1;
#X connect 7 0 8 0;
#X connect 8 0 11 0;
#X connect 8 0 12 0;
#X connect 8 0 13 0;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 10 0 12 0;
#X connect 10 0 13 0;
#X connect 11 0 6 0;
#X connect 12 0 5 0;
#X connect 13 0 0 0;
#X restore 150 304 pd features-7-9;
#X text 501 146 2: bark brightness;
#X text 501 166 3: bark centroid;
#X text 501 186 4: bark flatness;
#X text 501 206 5: bark flux;
#X text 501 226 6: bark irregularity;
#X text 501 246 7: bark kurtosis;
#X text 501 66 Feature attribute index:;
#X text 501 266 8: bark rolloff;
#X text 501 286 9: bark skewness;
#X text 501 306 10: bark spectrum slope;
#X text 501 326 11: bark spread;
#X text 501 346 12: brightness;
#X text 501 366 13: centroid;
#X text 501 386 14: flatness;
#X text 711 106 15: flux;
#X text 711 126 16: harmonicity;
#X text 711 146 17: inharmonicity;
#X text 711 166 18: irregularity;
#X text 711 186 19: kurtosis;
#X text 711 206 20: rolloff;
#X text 711 226 21: skewness;
#X text 711 246 22: slope;
#X text 711 266 23: spread;
#X text 711 286 24: wave slope;
#X text 711 306 25: zero crossing;
#X text 711 326 26: pitch;
#X text 711 346 27: amplitude;
#N canvas 176 203 1159 470 features-10-13 0;
#X obj 66 48 inlet;
#X obj 644 263 list append;
#X obj 46 363 list append;
#X obj 400 293 list append;
#X obj 835 164 r samplerate;
#X msg 835 185 samplerate \$1;
#X obj 230 323 list append;
#X obj 935 164 r current-analysis-sample;
#X msg 935 185 set tID-sample-\$1;
#X obj 66 78 t a a a a;
#X obj 46 385 outlet;
#X obj 707 233 inlet;
#X obj 400 202 specBrightness tID-sample--1;
#X obj 644 202 specCentroid tID-sample--1;
#X obj 230 202 barkSpecSpread tID-sample--1;
#X obj 46 202 barkSpecSlope tID-sample--1;
#X connect 0 0 9 0;
#X connect 1 0 3 1;
#X connect 2 0 10 0;
#X connect 3 0 6 1;
#X connect 4 0 5 0;
#X connect 5 0 12 0;
#X connect 5 0 13 0;
#X connect 5 0 15 0;
#X connect 6 0 2 1;
#X connect 7 0 8 0;
#X connect 8 0 12 0;
#X connect 8 0 13 0;
#X connect 8 0 14 0;
#X connect 8 0 15 0;
#X connect 9 0 15 0;
#X connect 9 1 14 0;
#X connect 9 2 12 0;
#X connect 9 3 13 0;
#X connect 11 0 1 1;
#X connect 12 0 3 0;
#X connect 13 0 1 0;
#X connect 14 0 6 0;
#X connect 15 0 2 0;
#X restore 200 244 pd features-10-13;
#N canvas 269 188 866 477 features-14-17 0;
#X obj 66 48 inlet;
#X obj 534 263 list append;
#X obj 46 363 list append;
#X obj 400 293 list append;
#X obj 545 164 r samplerate;
#X msg 545 185 samplerate \$1;
#X obj 230 323 list append;
#X obj 645 164 r current-analysis-sample;
#X msg 645 185 set tID-sample-\$1;
#X obj 66 78 t a a a a;
#X obj 46 385 outlet;
#X obj 597 233 inlet;
#X obj 230 202 specFlux tID-sample--1 256;
#X obj 400 202 specHarmonicity tID-sample--1;
#X obj 46 202 specFlatness tID-sample--1;
#X connect 0 0 9 0;
#X connect 1 0 3 1;
#X connect 2 0 10 0;
#X connect 3 0 6 1;
#X connect 4 0 5 0;
#X connect 5 0 13 0;
#X connect 5 0 14 0;
#X connect 6 0 2 1;
#X connect 7 0 8 0;
#X connect 8 0 12 0;
#X connect 8 0 13 0;
#X connect 8 0 14 0;
#X connect 9 0 14 0;
#X connect 9 1 12 0;
#X connect 9 2 13 0;
#X connect 11 0 1 1;
#X connect 12 0 6 0;
#X connect 13 0 3 0;
#X connect 13 1 1 0;
#X connect 14 0 2 0;
#X restore 230 204 pd features-14-17;
#N canvas 138 128 1159 470 features-18-21 0;
#X obj 66 48 inlet;
#X obj 644 263 list append;
#X obj 46 363 list append;
#X obj 400 293 list append;
#X obj 835 164 r samplerate;
#X msg 835 185 samplerate \$1;
#X obj 230 323 list append;
#X obj 935 164 r current-analysis-sample;
#X msg 935 185 set tID-sample-\$1;
#X obj 66 78 t a a a a;
#X obj 46 385 outlet;
#X obj 707 233 inlet;
#X obj 644 202 specSkewness tID-sample--1;
#X obj 400 202 specRolloff tID-sample--1;
#X obj 230 202 specKurtosis tID-sample--1;
#X obj 46 202 specIrregularity tID-sample--1;
#X connect 0 0 9 0;
#X connect 1 0 3 1;
#X connect 2 0 10 0;
#X connect 3 0 6 1;
#X connect 4 0 5 0;
#X connect 5 0 12 0;
#X connect 5 0 13 0;
#X connect 5 0 15 0;
#X connect 6 0 2 1;
#X connect 7 0 8 0;
#X connect 8 0 12 0;
#X connect 8 0 13 0;
#X connect 8 0 14 0;
#X connect 8 0 15 0;
#X connect 9 0 15 0;
#X connect 9 1 14 0;
#X connect 9 2 13 0;
#X connect 9 3 12 0;
#X connect 11 0 1 1;
#X connect 12 0 1 0;
#X connect 13 0 3 0;
#X connect 14 0 6 0;
#X connect 15 0 2 0;
#X restore 260 164 pd features-18-21;
#X obj 56 59 t a a a a a a a a;
#N canvas 199 215 860 482 features-22-24 0;
#X obj 66 48 inlet;
#X obj 46 363 list append;
#X obj 400 293 list append;
#X obj 545 164 r samplerate;
#X msg 545 185 samplerate \$1;
#X obj 230 323 list append;
#X obj 645 164 r current-analysis-sample;
#X msg 645 185 set tID-sample-\$1;
#X obj 46 385 outlet;
#X obj 517 233 inlet;
#X obj 66 78 t a a a;
#X obj 400 202 waveSlope tID-sample--1;
#X obj 230 202 specSpread tID-sample--1;
#X obj 46 202 specSlope tID-sample--1;
#X connect 0 0 10 0;
#X connect 1 0 8 0;
#X connect 2 0 5 1;
#X connect 3 0 4 0;
#X connect 4 0 11 0;
#X connect 4 0 13 0;
#X connect 5 0 1 1;
#X connect 6 0 7 0;
#X connect 7 0 11 0;
#X connect 7 0 12 0;
#X connect 7 0 13 0;
#X connect 9 0 2 1;
#X connect 10 0 13 0;
#X connect 10 1 12 0;
#X connect 10 2 11 0;
#X connect 11 0 2 0;
#X connect 12 0 5 0;
#X connect 13 0 1 0;
#X restore 290 124 pd features-22-24;
#N canvas 31 52 1019 569 features-25-and-up 0;
#X obj 382 54 inlet;
#X obj 633 301 list split 1;
#X obj 227 441 list append;
#X obj 417 391 list append;
#X obj 540 351 list append;
#X obj 227 481 outlet;
#X obj 692 201 r samplerate;
#X msg 692 222 samplerate \$1;
#X obj 792 201 r current-analysis-sample;
#X msg 792 222 set tID-sample-\$1;
#N canvas 442 250 816 449 sigmund-pitch-env 0;
#X obj 76 272 moses 21;
#X obj 76 293 t b;
#X msg 76 313 20;
#X obj 76 241 sigmund~ -t pitch env;
#X obj 42 104 list split 1;
#X obj 76 172 list append;
#X obj 165 83 r current-analysis-sample;
#X obj 165 135 pack f f;
#X obj 210 111 r samplerate;
#X obj 76 359 outlet;
#X obj 199 319 outlet;
#X obj 42 7 inlet;
#X msg 76 198 list tID-sample-\$3 \$2 \$1 \$4 0;
#X obj 368 77 r full-sample-mode;
#X obj 42 59 spigot;
#X obj 368 99 swap 1;
#X obj 368 121 -;
#X msg 235 280 -1;
#X msg 275 280 -1;
#X obj 233 231 t b b;
#X obj 305 165 spigot;
#X obj 42 29 t a b;
#X obj 357 153 r current-analysis-sample;
#X obj 305 343 f;
#X obj 401 193 tabread sample-lengths;
#X obj 430 319 r samplerate;
#X msg 305 385 list tID-sample-\$1 \$2 \$3 \$4 0;
#X obj 305 363 pack f f 0 f;
#X obj 401 227 > 65536;
#X obj 401 249 select 0 1;
#X msg 401 271 1024;
#X msg 441 271 65536;
#X text 542 223 cap sigmund~'s analysis window size to 65536 in the
case of full sample mode \, starting at the beginning of the sample.
If the sample isn't at least 65536 long \, just use a short window
of 1024 samples. This could still produce the "bad npts" sigmund~ error
if the sample is actually shorter than 1024, f 35;
#X connect 0 0 1 0;
#X connect 0 1 9 0;
#X connect 1 0 2 0;
#X connect 2 0 9 0;
#X connect 3 0 0 0;
#X connect 3 1 10 0;
#X connect 4 1 5 0;
#X connect 5 0 12 0;
#X connect 6 0 7 0;
#X connect 7 0 5 1;
#X connect 8 0 7 1;
#X connect 11 0 21 0;
#X connect 12 0 3 0;
#X connect 13 0 15 0;
#X connect 13 0 20 1;
#X connect 14 0 4 0;
#X connect 15 0 16 0;
#X connect 15 1 16 1;
#X connect 16 0 14 1;
#X connect 17 0 9 0;
#X connect 18 0 10 0;
#X connect 19 0 17 0;
#X connect 19 1 18 0;
#X connect 20 0 23 0;
#X connect 21 0 14 0;
#X connect 21 1 20 0;
#X connect 22 0 24 0;
#X connect 22 0 23 1;
#X connect 23 0 27 0;
#X connect 24 0 28 0;
#X connect 25 0 27 3;
#X connect 26 0 3 0;
#X connect 27 0 26 0;
#X connect 28 0 29 0;
#X connect 29 0 30 0;
#X connect 29 1 31 0;
#X connect 30 0 27 1;
#X connect 31 0 27 1;
#X restore 417 312 pd sigmund-pitch-env;
#X obj 96 244 r current-analysis-sample;
#X msg 96 265 set tID-sample-\$1;
#X obj 382 100 t a a a;
#X obj 227 380 zeroCrossing tID-sample--1;
#X obj 633 280 bfcc tID-sample--1 0.5;
#X connect 0 0 13 0;
#X connect 1 1 4 1;
#X connect 2 0 5 0;
#X connect 3 0 2 1;
#X connect 4 0 3 1;
#X connect 6 0 7 0;
#X connect 7 0 15 0;
#X connect 8 0 9 0;
#X connect 9 0 15 0;
#X connect 10 0 3 0;
#X connect 10 1 4 0;
#X connect 11 0 12 0;
#X connect 12 0 14 0;
#X connect 13 0 14 0;
#X connect 13 1 10 0;
#X connect 13 2 15 0;
#X connect 14 0 2 0;
#X connect 15 0 1 0;
#X restore 320 84 pd features-25-and-up;
#X text 711 366 28-76: BFCCs 1-49 (we dropped BFCC 0);
#X connect 0 0 37 0;
#X connect 1 0 3 0;
#X connect 2 0 1 1;
#X connect 6 0 2 1;
#X connect 34 0 6 1;
#X connect 35 0 34 1;
#X connect 36 0 35 1;
#X connect 37 0 1 0;
#X connect 37 1 2 0;
#X connect 37 2 6 0;
#X connect 37 3 34 0;
#X connect 37 4 35 0;
#X connect 37 5 36 0;
#X connect 37 6 38 0;
#X connect 37 7 39 0;
#X connect 38 0 36 1;
#X connect 39 0 38 1;
#X restore 425 255 pd multiple-analyses;
#X obj 284 346 s feature-length;
#X floatatom 314 324 5 0 0 0 - - -, f 5;
#X connect 2 0 3 0;
#X connect 4 0 13 0;
#X connect 7 0 8 1;
#X connect 8 0 18 0;
#X connect 8 0 17 0;
#X connect 9 0 8 0;
#X connect 9 1 16 0;
#X connect 11 0 10 0;
#X connect 13 0 1 0;
#X connect 13 2 15 0;
#X connect 13 3 2 0;
#X connect 13 4 14 0;
#X connect 13 5 9 0;
#X connect 13 6 11 0;
#X connect 13 7 12 0;
#X connect 16 0 0 0;
#X connect 16 0 7 0;
#X restore 80 115 pd analysis;
#N canvas 1350 703 445 320 tID-samples 0;
#N canvas 729 196 907 863 load-samples 0;
#X obj 278 379 f;
#X obj 308 379 + 1;
#X msg 296 350 0;
#X obj 674 573 / 5;
#X obj 674 597 i;
#X obj 574 654 pack f f f;
#X obj 607 581 % 5;
#X obj 278 686 soundfiler;
#X obj 674 621 * 50;
#X obj 607 605 * 150;
#X obj 213 317 t b a;
#X obj 159 471 f;
#X obj 159 497 + 1;
#X msg 574 684 \; pd-sample-bank obj \$2 \$3 table tID-sample-\$1;
#X obj 278 734 list prepend;
#X obj 366 734 t l;
#X obj 257 762 list;
#X obj 257 784 list prepend 0;
#X obj 257 806 s sample-lengths;
#X obj 58 622 s num-samples;
#N canvas 532 140 481 372 resize-samp-lengths 0;
#X obj 108 71 moses 2;
#X obj 59 185 t b;
#X text 63 260 Special case for num-samples==1;
#X obj 108 36 inlet;
#X msg 59 207 \; sample-lengths resize 2 \;;
#X msg 178 121 \; sample-lengths resize \$1 \;;
#X connect 0 0 1 0;
#X connect 0 1 5 0;
#X connect 1 0 4 0;
#X connect 3 0 0 0;
#X restore 222 553 pd resize-samp-lengths;
#N canvas 194 162 710 456 reset-stuff 0;
#X obj 62 37 inlet;
#X obj 201 257 t f b;
#X obj 201 280 until;
#X obj 201 333 f;
#X obj 241 333 + 1;
#X msg 226 308 0;
#X obj 201 227 f;
#X obj 216 201 r num-player-voices;
#X msg 208 158 \; pd dsp 0 \;;
#X msg 31 357 \; pd-sample-bank clear \;;
#X msg 201 355 \; play-\$1 0 -1 \;;
#X obj 63 60 t b b b b;
#X obj 302 136 s sample-load-reset;
#X text 301 263 Turn DSP off then back on later so we don't get complaints
from tabplay~ saying the array disappeared. We also have to set all
the tabplay~ arrays to the dummy (-1) array since that'll be the only
thing that will be guaranteed to exist after the clear.;
#X connect 0 0 11 0;
#X connect 1 0 2 0;
#X connect 1 1 5 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 3 0 10 0;
#X connect 4 0 3 1;
#X connect 5 0 3 1;
#X connect 6 0 1 0;
#X connect 7 0 6 1;
#X connect 11 0 9 0;
#X connect 11 1 6 0;
#X connect 11 2 8 0;
#X connect 11 3 12 0;
#X restore 332 254 pd reset-stuff;
#X obj 347 709 r sample-load-reset;
#X obj 296 328 r sample-load-reset;
#X obj 278 630 pack f s f;
#X msg 278 662 read -resize -maxsize \$3 \$2 tID-sample-\$1;
#X text 373 630 set maxsize in [pd init];
#X obj 334 601 r max-sample-length;
#X obj 278 430 t f f f f;
#N canvas 532 140 593 408 rebound-samp-lengths 0;
#X msg 211 148 max;
#X obj 285 142 - 1;
#X obj 178 71 moses 2;
#X msg 33 205 max;
#X obj 33 178 t b;
#X text 43 345 Special case for num-samples==1;
#X obj 178 36 inlet;
#X obj 33 227 tabletool sample-lengths;
#X obj 33 258 max 1;
#X obj 211 170 tabletool sample-lengths;
#X obj 211 201 max 1;
#X obj 259 232 pack f f;
#X msg 259 272 \; sample-lengths bounds 0 \$1 \$2 0 \;;
#X obj 239 101 t b f;
#X msg 33 291 \; sample-lengths bounds 0 \$1 1 0 \; sample-lengths
1 0 \;;
#X connect 0 0 9 0;
#X connect 1 0 11 1;
#X connect 2 0 4 0;
#X connect 2 1 13 0;
#X connect 3 0 7 0;
#X connect 4 0 3 0;
#X connect 6 0 2 0;
#X connect 7 0 8 0;
#X connect 8 0 14 0;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 13 0 0 0;
#X connect 13 1 1 0;
#X restore 124 590 pd rebound-samp-lengths;
#X obj 159 522 t f f b f;
#X obj 179 10 r filenames-list;
#X obj 476 319 text define filenames;
#X msg 476 286 read -c \$1;
#X obj 476 246 symbol;
#X obj 179 82 t b b b b a;
#X obj 228 155 text size filenames;
#X obj 213 180 f;
#X obj 213 202 t f b;
#X obj 203 234 until;
#X obj 213 266 f;
#X obj 243 268 + 1;
#X obj 213 290 text get filenames;
#X msg 241 244 0;
#X msg 29 286 \; pd dsp 1 \; file-loading-finished bang \;;
#X obj 179 52 makefilename ../filename-lists/%s;
#X obj 179 32 symbol;
#X connect 0 0 1 0;
#X connect 0 0 11 1;
#X connect 0 0 28 0;
#X connect 1 0 0 1;
#X connect 2 0 0 1;
#X connect 3 0 4 0;
#X connect 4 0 8 0;
#X connect 5 0 13 0;
#X connect 6 0 9 0;
#X connect 7 0 14 0;
#X connect 8 0 5 2;
#X connect 9 0 5 1;
#X connect 10 0 0 0;
#X connect 10 1 24 1;
#X connect 11 0 12 0;
#X connect 12 0 30 0;
#X connect 14 0 15 0;
#X connect 14 0 16 1;
#X connect 15 0 14 1;
#X connect 16 0 17 0;
#X connect 17 0 18 0;
#X connect 22 0 14 1;
#X connect 23 0 2 0;
#X connect 24 0 25 0;
#X connect 25 0 7 0;
#X connect 27 0 24 2;
#X connect 28 0 24 0;
#X connect 28 1 5 0;
#X connect 28 2 6 0;
#X connect 28 3 3 0;
#X connect 30 0 19 0;
#X connect 30 1 29 0;
#X connect 30 2 16 0;
#X connect 30 3 20 0;
#X connect 31 0 46 0;
#X connect 33 0 32 0;
#X connect 34 0 33 0;
#X connect 35 0 44 0;
#X connect 35 1 11 0;
#X connect 35 2 37 0;
#X connect 35 3 21 0;
#X connect 35 3 36 0;
#X connect 35 4 34 0;
#X connect 36 0 37 1;
#X connect 37 0 38 0;
#X connect 38 0 39 0;
#X connect 38 1 43 0;
#X connect 39 0 40 0;
#X connect 40 0 41 0;
#X connect 40 0 42 0;
#X connect 41 0 40 1;
#X connect 42 0 10 0;
#X connect 43 0 40 1;
#X connect 45 0 35 0;
#X connect 46 0 45 0;
#X restore 9 22 pd load-samples;
#N canvas 280 208 874 622 sample-bank 0;
#X obj 0 0 table tID-sample-0;
#X obj 150 0 table tID-sample-1;
#X obj 300 0 table tID-sample-2;
#X obj 450 0 table tID-sample-3;
#X obj 600 0 table tID-sample-4;
#X obj 0 50 table tID-sample-5;
#X obj 150 50 table tID-sample-6;
#X obj 300 50 table tID-sample-7;
#X obj 450 50 table tID-sample-8;
#X obj 600 50 table tID-sample-9;
#X obj 0 100 table tID-sample-10;
#X obj 150 100 table tID-sample-11;
#X obj 300 100 table tID-sample-12;
#X obj 450 100 table tID-sample-13;
#X obj 600 100 table tID-sample-14;
#X obj 0 150 table tID-sample-15;
#X obj 150 150 table tID-sample-16;
#X obj 300 150 table tID-sample-17;
#X obj 450 150 table tID-sample-18;
#X obj 600 150 table tID-sample-19;
#X obj 0 200 table tID-sample-20;
#X obj 150 200 table tID-sample-21;
#X obj 300 200 table tID-sample-22;
#X obj 450 200 table tID-sample-23;
#X obj 600 200 table tID-sample-24;
#X obj 0 250 table tID-sample-25;
#X obj 150 250 table tID-sample-26;
#X obj 300 250 table tID-sample-27;
#X obj 450 250 table tID-sample-28;
#X obj 600 250 table tID-sample-29;
#X obj 0 300 table tID-sample-30;
#X obj 150 300 table tID-sample-31;
#X obj 300 300 table tID-sample-32;
#X obj 450 300 table tID-sample-33;
#X obj 600 300 table tID-sample-34;
#X obj 0 350 table tID-sample-35;
#X obj 150 350 table tID-sample-36;
#X obj 300 350 table tID-sample-37;
#X obj 450 350 table tID-sample-38;
#X obj 600 350 table tID-sample-39;
#X obj 0 400 table tID-sample-40;
#X obj 150 400 table tID-sample-41;
#X obj 300 400 table tID-sample-42;
#X obj 450 400 table tID-sample-43;
#X obj 600 400 table tID-sample-44;
#X obj 0 450 table tID-sample-45;
#X obj 150 450 table tID-sample-46;
#X obj 300 450 table tID-sample-47;
#X obj 450 450 table tID-sample-48;
#X obj 600 450 table tID-sample-49;
#X obj 0 500 table tID-sample-50;
#X obj 150 500 table tID-sample-51;
#X obj 300 500 table tID-sample-52;
#X obj 450 500 table tID-sample-53;
#X obj 600 500 table tID-sample-54;
#X obj 0 550 table tID-sample-55;
#X obj 150 550 table tID-sample-56;
#X obj 300 550 table tID-sample-57;
#X obj 450 550 table tID-sample-58;
#X obj 600 550 table tID-sample-59;
#X obj 0 600 table tID-sample-60;
#X obj 150 600 table tID-sample-61;
#X obj 300 600 table tID-sample-62;
#X obj 450 600 table tID-sample-63;
#X obj 600 600 table tID-sample-64;
#X obj 0 650 table tID-sample-65;
#X obj 150 650 table tID-sample-66;
#X obj 300 650 table tID-sample-67;
#X obj 450 650 table tID-sample-68;
#X obj 600 650 table tID-sample-69;
#X obj 0 700 table tID-sample-70;
#X obj 150 700 table tID-sample-71;
#X obj 300 700 table tID-sample-72;
#X obj 450 700 table tID-sample-73;
#X obj 600 700 table tID-sample-74;
#X obj 0 750 table tID-sample-75;
#X obj 150 750 table tID-sample-76;
#X obj 300 750 table tID-sample-77;
#X obj 450 750 table tID-sample-78;
#X obj 600 750 table tID-sample-79;
#X obj 0 800 table tID-sample-80;
#X obj 150 800 table tID-sample-81;
#X obj 300 800 table tID-sample-82;
#X obj 450 800 table tID-sample-83;
#X obj 600 800 table tID-sample-84;
#X obj 0 850 table tID-sample-85;
#X obj 150 850 table tID-sample-86;
#X obj 300 850 table tID-sample-87;
#X obj 450 850 table tID-sample-88;
#X obj 600 850 table tID-sample-89;
#X obj 0 900 table tID-sample-90;
#X obj 150 900 table tID-sample-91;
#X obj 300 900 table tID-sample-92;
#X obj 450 900 table tID-sample-93;
#X obj 600 900 table tID-sample-94;
#X obj 0 950 table tID-sample-95;
#X obj 150 950 table tID-sample-96;
#X obj 300 950 table tID-sample-97;
#X obj 450 950 table tID-sample-98;
#X obj 600 950 table tID-sample-99;
#X obj 0 1000 table tID-sample-100;
#X obj 150 1000 table tID-sample-101;
#X obj 300 1000 table tID-sample-102;
#X obj 450 1000 table tID-sample-103;
#X obj 600 1000 table tID-sample-104;
#X obj 0 1050 table tID-sample-105;
#X obj 150 1050 table tID-sample-106;
#X obj 300 1050 table tID-sample-107;
#X obj 450 1050 table tID-sample-108;
#X obj 600 1050 table tID-sample-109;
#X obj 0 1100 table tID-sample-110;
#X obj 150 1100 table tID-sample-111;
#X obj 300 1100 table tID-sample-112;
#X obj 450 1100 table tID-sample-113;
#X obj 600 1100 table tID-sample-114;
#X obj 0 1150 table tID-sample-115;
#X obj 150 1150 table tID-sample-116;
#X obj 300 1150 table tID-sample-117;
#X obj 450 1150 table tID-sample-118;
#X obj 600 1150 table tID-sample-119;
#X obj 0 1200 table tID-sample-120;
#X obj 150 1200 table tID-sample-121;
#X obj 300 1200 table tID-sample-122;
#X obj 450 1200 table tID-sample-123;
#X obj 600 1200 table tID-sample-124;
#X obj 0 1250 table tID-sample-125;
#X obj 150 1250 table tID-sample-126;
#X obj 300 1250 table tID-sample-127;
#X obj 450 1250 table tID-sample-128;
#X obj 600 1250 table tID-sample-129;
#X obj 0 1300 table tID-sample-130;
#X obj 150 1300 table tID-sample-131;
#X obj 300 1300 table tID-sample-132;
#X obj 450 1300 table tID-sample-133;
#X obj 600 1300 table tID-sample-134;
#X obj 0 1350 table tID-sample-135;
#X obj 150 1350 table tID-sample-136;
#X obj 300 1350 table tID-sample-137;
#X obj 450 1350 table tID-sample-138;
#X obj 600 1350 table tID-sample-139;
#X obj 0 1400 table tID-sample-140;
#X obj 150 1400 table tID-sample-141;
#X obj 300 1400 table tID-sample-142;
#X obj 450 1400 table tID-sample-143;
#X obj 600 1400 table tID-sample-144;
#X obj 0 1450 table tID-sample-145;
#X obj 150 1450 table tID-sample-146;
#X obj 300 1450 table tID-sample-147;
#X obj 450 1450 table tID-sample-148;
#X obj 600 1450 table tID-sample-149;
#X obj 0 1500 table tID-sample-150;
#X obj 150 1500 table tID-sample-151;
#X obj 300 1500 table tID-sample-152;
#X obj 450 1500 table tID-sample-153;
#X obj 600 1500 table tID-sample-154;
#X obj 0 1550 table tID-sample-155;
#X obj 150 1550 table tID-sample-156;
#X obj 300 1550 table tID-sample-157;
#X obj 450 1550 table tID-sample-158;
#X obj 600 1550 table tID-sample-159;
#X obj 0 1600 table tID-sample-160;
#X obj 150 1600 table tID-sample-161;
#X obj 300 1600 table tID-sample-162;
#X obj 450 1600 table tID-sample-163;
#X obj 600 1600 table tID-sample-164;
#X obj 0 1650 table tID-sample-165;
#X obj 150 1650 table tID-sample-166;
#X obj 300 1650 table tID-sample-167;
#X obj 450 1650 table tID-sample-168;
#X obj 600 1650 table tID-sample-169;
#X obj 0 1700 table tID-sample-170;
#X obj 150 1700 table tID-sample-171;
#X obj 300 1700 table tID-sample-172;
#X obj 450 1700 table tID-sample-173;
#X obj 600 1700 table tID-sample-174;
#X obj 0 1750 table tID-sample-175;
#X obj 150 1750 table tID-sample-176;
#X obj 300 1750 table tID-sample-177;
#X obj 450 1750 table tID-sample-178;
#X obj 600 1750 table tID-sample-179;
#X obj 0 1800 table tID-sample-180;
#X obj 150 1800 table tID-sample-181;
#X obj 300 1800 table tID-sample-182;
#X obj 450 1800 table tID-sample-183;
#X obj 600 1800 table tID-sample-184;
#X obj 0 1850 table tID-sample-185;
#X obj 150 1850 table tID-sample-186;
#X obj 300 1850 table tID-sample-187;
#X obj 450 1850 table tID-sample-188;
#X obj 600 1850 table tID-sample-189;
#X obj 0 1900 table tID-sample-190;
#X obj 150 1900 table tID-sample-191;
#X obj 300 1900 table tID-sample-192;
#X obj 450 1900 table tID-sample-193;
#X obj 600 1900 table tID-sample-194;
#X obj 0 1950 table tID-sample-195;
#X obj 150 1950 table tID-sample-196;
#X obj 300 1950 table tID-sample-197;
#X obj 450 1950 table tID-sample-198;
#X obj 600 1950 table tID-sample-199;
#X obj 0 2000 table tID-sample-200;
#X obj 150 2000 table tID-sample-201;
#X obj 300 2000 table tID-sample-202;
#X obj 450 2000 table tID-sample-203;
#X obj 600 2000 table tID-sample-204;
#X obj 0 2050 table tID-sample-205;
#X obj 150 2050 table tID-sample-206;
#X obj 300 2050 table tID-sample-207;
#X obj 450 2050 table tID-sample-208;
#X obj 600 2050 table tID-sample-209;
#X obj 0 2100 table tID-sample-210;
#X obj 150 2100 table tID-sample-211;
#X obj 300 2100 table tID-sample-212;
#X obj 450 2100 table tID-sample-213;
#X obj 600 2100 table tID-sample-214;
#X obj 0 2150 table tID-sample-215;
#X obj 150 2150 table tID-sample-216;
#X obj 300 2150 table tID-sample-217;
#X obj 450 2150 table tID-sample-218;
#X obj 600 2150 table tID-sample-219;
#X obj 0 2200 table tID-sample-220;
#X obj 150 2200 table tID-sample-221;
#X obj 300 2200 table tID-sample-222;
#X obj 450 2200 table tID-sample-223;
#X obj 600 2200 table tID-sample-224;
#X obj 0 2250 table tID-sample-225;
#X obj 150 2250 table tID-sample-226;
#X obj 300 2250 table tID-sample-227;
#X obj 450 2250 table tID-sample-228;
#X obj 600 2250 table tID-sample-229;
#X obj 0 2300 table tID-sample-230;
#X obj 150 2300 table tID-sample-231;
#X obj 300 2300 table tID-sample-232;
#X obj 450 2300 table tID-sample-233;
#X obj 600 2300 table tID-sample-234;
#X obj 0 2350 table tID-sample-235;
#X obj 150 2350 table tID-sample-236;
#X obj 300 2350 table tID-sample-237;
#X obj 450 2350 table tID-sample-238;
#X obj 600 2350 table tID-sample-239;
#X obj 0 2400 table tID-sample-240;
#X obj 150 2400 table tID-sample-241;
#X obj 300 2400 table tID-sample-242;
#X obj 450 2400 table tID-sample-243;
#X obj 600 2400 table tID-sample-244;
#X obj 0 2450 table tID-sample-245;
#X obj 150 2450 table tID-sample-246;
#X obj 300 2450 table tID-sample-247;
#X obj 450 2450 table tID-sample-248;
#X obj 600 2450 table tID-sample-249;
#X obj 0 2500 table tID-sample-250;
#X obj 150 2500 table tID-sample-251;
#X obj 300 2500 table tID-sample-252;
#X obj 450 2500 table tID-sample-253;
#X obj 600 2500 table tID-sample-254;
#X obj 0 2550 table tID-sample-255;
#X obj 150 2550 table tID-sample-256;
#X obj 300 2550 table tID-sample-257;
#X obj 450 2550 table tID-sample-258;
#X obj 600 2550 table tID-sample-259;
#X obj 0 2600 table tID-sample-260;
#X obj 150 2600 table tID-sample-261;
#X obj 300 2600 table tID-sample-262;
#X obj 450 2600 table tID-sample-263;
#X obj 600 2600 table tID-sample-264;
#X obj 0 2650 table tID-sample-265;
#X obj 150 2650 table tID-sample-266;
#X obj 300 2650 table tID-sample-267;
#X obj 450 2650 table tID-sample-268;
#X obj 600 2650 table tID-sample-269;
#X obj 0 2700 table tID-sample-270;
#X obj 150 2700 table tID-sample-271;
#X obj 300 2700 table tID-sample-272;
#X obj 450 2700 table tID-sample-273;
#X obj 600 2700 table tID-sample-274;
#X obj 0 2750 table tID-sample-275;
#X obj 150 2750 table tID-sample-276;
#X obj 300 2750 table tID-sample-277;
#X obj 450 2750 table tID-sample-278;
#X obj 600 2750 table tID-sample-279;
#X obj 0 2800 table tID-sample-280;
#X obj 150 2800 table tID-sample-281;
#X obj 300 2800 table tID-sample-282;
#X obj 450 2800 table tID-sample-283;
#X obj 600 2800 table tID-sample-284;
#X obj 0 2850 table tID-sample-285;
#X obj 150 2850 table tID-sample-286;
#X obj 300 2850 table tID-sample-287;
#X obj 450 2850 table tID-sample-288;
#X obj 600 2850 table tID-sample-289;
#X obj 0 2900 table tID-sample-290;
#X obj 150 2900 table tID-sample-291;
#X obj 300 2900 table tID-sample-292;
#X obj 450 2900 table tID-sample-293;
#X obj 600 2900 table tID-sample-294;
#X obj 0 2950 table tID-sample-295;
#X obj 150 2950 table tID-sample-296;
#X obj 300 2950 table tID-sample-297;
#X obj 450 2950 table tID-sample-298;
#X obj 600 2950 table tID-sample-299;
#X obj 0 3000 table tID-sample-300;
#X obj 150 3000 table tID-sample-301;
#X obj 300 3000 table tID-sample-302;
#X obj 450 3000 table tID-sample-303;
#X obj 600 3000 table tID-sample-304;
#X obj 0 3050 table tID-sample-305;
#X obj 150 3050 table tID-sample-306;
#X obj 300 3050 table tID-sample-307;
#X obj 450 3050 table tID-sample-308;
#X obj 600 3050 table tID-sample-309;
#X obj 0 3100 table tID-sample-310;
#X obj 150 3100 table tID-sample-311;
#X obj 300 3100 table tID-sample-312;
#X obj 450 3100 table tID-sample-313;
#X obj 600 3100 table tID-sample-314;
#X obj 0 3150 table tID-sample-315;
#X obj 150 3150 table tID-sample-316;
#X obj 300 3150 table tID-sample-317;
#X obj 450 3150 table tID-sample-318;
#X obj 600 3150 table tID-sample-319;
#X obj 0 3200 table tID-sample-320;
#X obj 150 3200 table tID-sample-321;
#X obj 300 3200 table tID-sample-322;
#X obj 450 3200 table tID-sample-323;
#X obj 600 3200 table tID-sample-324;
#X obj 0 3250 table tID-sample-325;
#X obj 150 3250 table tID-sample-326;
#X obj 300 3250 table tID-sample-327;
#X obj 450 3250 table tID-sample-328;
#X obj 600 3250 table tID-sample-329;
#X obj 0 3300 table tID-sample-330;
#X obj 150 3300 table tID-sample-331;
#X obj 300 3300 table tID-sample-332;
#X obj 450 3300 table tID-sample-333;
#X obj 600 3300 table tID-sample-334;
#X restore 9 82 pd sample-bank;
#X obj 9 172 table sample-frames;
#N canvas 433 106 854 716 get-num-frames 0;
#X msg 161 496 max;
#X obj 260 459 - 1;
#X obj 161 526 tabletool sample-frames;
#X msg 296 440 sum;
#X obj 296 470 tabletool sample-frames;
#X obj 169 27 r num-samples;
#N canvas 13 88 653 643 get-frame-locations 0;
#X obj 94 13 inlet;
#X obj 324 133 until;
#X obj 324 249 f;
#X obj 364 249 + 1;
#X msg 349 224 0;
#X obj 324 479 tabwrite frame-locations;
#X obj 324 332 until;
#X obj 368 372 f;
#X obj 408 372 + 1;
#X msg 393 347 0;
#X obj 324 302 tabread sample-frames;
#X obj 368 398 t b f;
#X obj 324 432 f;
#X obj 324 272 t f f;
#X msg 64 391 max;
#X obj 64 421 tabletool frame-locations;
#X obj 125 475 - 1;
#X obj 64 530 pack f f;
#X obj 94 59 t b f b;
#X obj 125 455 r num-frames-total;
#X msg 64 553 \; frame-locations bounds 0 \$1 \$2 0 \;;
#X obj 64 443 max 1;
#X obj 125 497 max 1;
#X connect 0 0 18 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 2 0 13 0;
#X connect 3 0 2 1;
#X connect 4 0 2 1;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 7 0 11 0;
#X connect 8 0 7 1;
#X connect 9 0 7 1;
#X connect 10 0 6 0;
#X connect 11 0 12 0;
#X connect 11 1 5 1;
#X connect 12 0 5 0;
#X connect 13 0 10 0;
#X connect 13 1 12 1;
#X connect 14 0 15 0;
#X connect 15 0 21 0;
#X connect 16 0 22 0;
#X connect 17 0 20 0;
#X connect 18 0 14 0;
#X connect 18 1 1 0;
#X connect 18 2 4 0;
#X connect 18 2 9 0;
#X connect 19 0 16 0;
#X connect 21 0 17 0;
#X connect 22 0 17 1;
#X restore 25 184 pd get-frame-locations;
#X obj 496 178 moses 2;
#X obj 221 430 moses 2;
#N canvas 790 396 1093 751 get-number-of-frames 0;
#X obj 60 60 t f b;
#X obj 60 83 until;
#X obj 60 136 f;
#X obj 100 136 + 1;
#X msg 75 111 0;
#X obj 425 176 tabread sample-lengths;
#X obj 30 384 tabwrite sample-frames;
#X msg 319 451 list tID-sample-\$3 \$2 \$1 \$4 0;
#X obj 60 32 inlet;
#X obj 292 224 until;
#X obj 413 390 r samplerate;
#X obj 410 297 r window-size;
#X obj 319 421 pack f f f f;
#X obj 319 296 f;
#X msg 334 266 0;
#X obj 359 296 +;
#X obj 30 360 f;
#X obj 410 218 >;
#X obj 425 198 -;
#X obj 410 240 select 1;
#X obj 460 198 r window-size;
#X obj 59 331 f;
#X msg 74 301 1;
#X obj 319 552 >=;
#X obj 334 522 r db-thresh;
#X obj 99 331 + 1;
#X obj 319 574 select 1;
#X obj 359 318 t f f;
#X obj 396 73 s get-num-frames-reset;
#X obj 366 266 r get-num-frames-reset;
#X obj 59 256 r get-num-frames-reset;
#X obj 336 102 s get-num-frames-sample-idx;
#X obj 425 149 r get-num-frames-sample-idx;
#X obj 399 366 r get-num-frames-sample-idx;
#X obj 103 356 r get-num-frames-sample-idx;
#X obj 275 34 t b b f b;
#X text 426 326 Traverse the sample and check that each frame is above
our db-thresh \, keeping count of those that are.;
#X msg 30 298 0;
#X obj 319 494 sigmund~ -t env;
#X obj 301 330 t f f f;
#X obj 464 628 f;
#X text 594 673 not the "get-num-frames-reset" \, because that starts
over on every sample;
#X obj 464 670 list prepend;
#X obj 552 670 t l;
#X obj 533 643 r sample-load-reset;
#X obj 464 692 outlet;
#X obj 645 203 r full-sample-mode;
#X obj 645 225 swap 1;
#X obj 645 247 -;
#X obj 292 197 spigot;
#X obj 242 257 spigot;
#X msg 242 279 1;
#X obj 242 301 t b f;
#X connect 0 0 1 0;
#X connect 0 1 4 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 2 0 35 0;
#X connect 3 0 2 1;
#X connect 4 0 2 1;
#X connect 5 0 18 0;
#X connect 7 0 38 0;
#X connect 8 0 0 0;
#X connect 9 0 13 0;
#X connect 10 0 12 3;
#X connect 11 0 12 1;
#X connect 11 0 15 1;
#X connect 12 0 7 0;
#X connect 13 0 39 0;
#X connect 14 0 13 1;
#X connect 15 0 27 0;
#X connect 16 0 6 0;
#X connect 17 0 19 0;
#X connect 18 0 17 1;
#X connect 19 0 9 1;
#X connect 20 0 18 1;
#X connect 21 0 16 1;
#X connect 21 0 25 0;
#X connect 22 0 21 1;
#X connect 23 0 26 0;
#X connect 24 0 23 1;
#X connect 25 0 21 1;
#X connect 26 0 21 0;
#X connect 26 0 40 0;
#X connect 27 0 13 1;
#X connect 27 1 17 0;
#X connect 29 0 14 0;
#X connect 30 0 22 0;
#X connect 30 0 37 0;
#X connect 32 0 5 0;
#X connect 33 0 12 2;
#X connect 34 0 6 1;
#X connect 35 0 16 0;
#X connect 35 1 49 0;
#X connect 35 1 50 0;
#X connect 35 2 31 0;
#X connect 35 3 28 0;
#X connect 37 0 16 1;
#X connect 38 0 23 0;
#X connect 39 0 12 0;
#X connect 39 1 40 1;
#X connect 39 2 15 0;
#X connect 40 0 42 0;
#X connect 42 0 43 0;
#X connect 42 0 45 0;
#X connect 43 0 42 1;
#X connect 44 0 42 1;
#X connect 46 0 47 0;
#X connect 46 0 50 1;
#X connect 47 0 48 0;
#X connect 47 1 48 1;
#X connect 48 0 49 1;
#X connect 49 0 9 0;
#X connect 50 0 51 0;
#X connect 51 0 52 0;
#X connect 52 0 21 0;
#X connect 52 1 42 0;
#X restore 270 177 pd get-number-of-frames;
#X obj 161 240 list;
#X obj 161 262 list prepend 0;
#X obj 161 284 s frame-start-samp;
#X obj 169 70 t f b f f f;
#X obj 223 348 t b f b;
#X obj 209 555 pack f f f;
#X msg 209 595 \; sample-frames bounds 0 \$1 \$2 0 \; frame-locations
resize \$3 \; frame-start-samp resize \$3 \; num-frames-total \$3 \;
;
#X msg 544 202 \; sample-frames resize \$1 \;;
#X msg 496 272 \; sample-frames resize 2 \; sample-frames 1 0 \;;
#X text 498 337 Special case for num-samples==1;
#X connect 0 0 2 0;
#X connect 1 0 15 1;
#X connect 2 0 15 0;
#X connect 3 0 4 0;
#X connect 4 0 15 2;
#X connect 5 0 13 0;
#X connect 7 0 18 0;
#X connect 7 1 17 0;
#X connect 8 0 15 1;
#X connect 8 1 1 0;
#X connect 9 0 10 1;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 13 0 6 0;
#X connect 13 1 10 0;
#X connect 13 2 14 0;
#X connect 13 3 9 0;
#X connect 13 4 7 0;
#X connect 14 0 0 0;
#X connect 14 1 8 0;
#X connect 14 2 3 0;
#X connect 15 0 16 0;
#X restore 9 52 pd get-num-frames;
#X obj 9 202 table frame-locations;
#N canvas 412 79 560 268 notes 0;
#X text 52 50 For each sample \, find out how many frames are in it
based on window size \, hop \, and sample length.;
#X text 50 127 Get numFrames for all samples. Sum up all the numFrames
for all samples \, and make a table of that length. That'll be our
lookup table to see which sample houses frame number X when it comes
out of timbreID;
#X restore 274 253 pd notes;
#X obj 9 142 table sample-lengths;
#X obj 132 82 table tID-sample--1;
#X text 268 82 A dummy table;
#X obj 9 232 table frame-start-samp;
#X restore 235 103 pd tID-samples;
#N canvas 703 784 727 377 grain-info 0;
#X obj 65 230 r samplerate;
#X obj 45 253 /;
#X obj 45 31 r current-playback-frame;
#X obj 377 51 r current-playback-sample;
#X obj 45 124 t f f;
#X obj 175 200 r samplerate;
#X obj 155 223 /;
#X obj 175 150 r window-size;
#X obj 155 173 +;
#X obj 45 274 s grain-info-seconds-start-set;
#X obj 377 187 s grain-info-file-name-set;
#X obj 155 244 s grain-info-seconds-end-set;
#X obj 437 105 s grain-info-sample-number-set;
#X obj 80 57 s grain-info-frame-number-set;
#X obj 45 102 tabread frame-start-samp;
#X obj 377 133 text get filenames;
#X obj 377 73 t f f;
#X obj 377 155 symbol;
#X connect 0 0 1 1;
#X connect 1 0 9 0;
#X connect 2 0 13 0;
#X connect 2 0 14 0;
#X connect 3 0 16 0;
#X connect 4 0 1 0;
#X connect 4 1 8 0;
#X connect 5 0 6 1;
#X connect 6 0 11 0;
#X connect 7 0 8 1;
#X connect 8 0 6 0;
#X connect 14 0 4 0;
#X connect 15 0 17 0;
#X connect 16 0 15 0;
#X connect 16 1 12 0;
#X connect 17 0 10 0;
#X restore 235 123 pd grain-info;
#X obj 80 42 r do-analysis;
#X obj 62 83 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 60 151 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 80 187 s analysis-finished;
#X connect 0 0 5 0;
#X connect 0 0 6 0;
#X connect 3 0 0 0;
#X connect 3 0 4 0;
#X restore 48 59 pd analysis;
#N canvas 1028 424 456 316 masterprocess-sends 0;
#X obj 51 43 masterprocess-send analysis-finished;
#X obj 51 63 masterprocess-send num-frames-total;
#X obj 51 123 masterprocess-send grain-info-frame-number-set;
#X obj 51 143 masterprocess-send grain-info-seconds-end-set;
#X obj 51 163 masterprocess-send grain-info-seconds-start-set;
#X obj 51 83 masterprocess-send grain-info-file-name-set;
#X obj 51 103 masterprocess-send grain-info-sample-number-set;
#X obj 51 23 masterprocess-send file-loading-finished;
#X obj 51 183 masterprocess-send audio-process-loadbang;
#X restore 198 59 pd masterprocess-sends;
#X connect 4 0 3 0;
#X connect 4 0 3 1;
