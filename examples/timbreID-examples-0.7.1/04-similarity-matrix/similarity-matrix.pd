#N canvas 105 215 526 450 10;
#X declare -path ../lib;
#N canvas 559 85 368 333 init 0;
#X obj 70 14 loadbang;
#X obj 70 35 t b b;
#X msg 18 197 \; master-volume-set 85 \; scrub-pos -4 \; pd dsp 1 \;
;
#X msg 157 97 \; overlap-radio-set 1 \; window-radio-set 3 \;;
#X obj 66 274 declare -path ../lib;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 1 3 0;
#X restore 37 42 pd init;
#X obj 291 142 bng 15 250 50 0 open-sf empty open-soundfile 17 7 0
12 -4032 -1 -1;
#X obj 291 162 bng 15 250 50 0 play-sf empty play-soundfile 17 7 0
12 -4034 -1 -1;
#N canvas 59 67 567 377 gemwin 0;
#X obj 102 122 tgl 15 0 \$0-gemstart \$0-gemstart empty 17 7 0 10 -262144
-1 -1 0 1;
#X obj 102 161 r \$0-gemstart;
#X obj 102 182 select 1 0;
#X msg 102 214 create \, 1;
#X msg 177 215 destroy;
#X obj 102 239 t a;
#X obj 318 54 inlet;
#X obj 318 261 gemwin;
#X obj 318 100 t a a;
#X obj 318 287 outlet;
#X obj 350 128 route create destroy;
#X obj 350 150 t b;
#X msg 350 172 1;
#X obj 390 150 t b;
#X msg 390 172 0;
#X msg 382 216 set \$1;
#X text 118 122 rendering;
#X obj 350 195 t b f;
#X msg 136 269 0;
#X obj 136 290 s set-kbd-nav-on;
#X obj 136 310 s set-mouseover-on;
#X obj 136 330 s set-animate;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 2 1 4 0;
#X connect 2 1 18 0;
#X connect 3 0 5 0;
#X connect 4 0 5 0;
#X connect 5 0 8 0;
#X connect 6 0 8 0;
#X connect 7 0 9 0;
#X connect 8 0 7 0;
#X connect 8 1 10 0;
#X connect 10 0 11 0;
#X connect 10 1 13 0;
#X connect 11 0 12 0;
#X connect 12 0 17 0;
#X connect 13 0 14 0;
#X connect 14 0 17 0;
#X connect 15 0 0 0;
#X connect 17 1 15 0;
#X connect 18 0 19 0;
#X connect 18 0 20 0;
#X connect 18 0 21 0;
#X coords 0 -1 1 1 85 40 1 100 100;
#X restore 37 319 pd gemwin;
#N canvas 556 34 767 820 gem 0;
#N canvas 671 146 290 250 reset-rendering 0;
#X msg 101 146 0;
#X msg 63 146 1;
#X obj 63 184 outlet;
#X obj 101 122 r lb1;
#X obj 63 34 r render-plot;
#X obj 19 6 r render-points;
#X obj 63 56 t b b;
#X obj 133 95 s do-analysis;
#X connect 0 0 2 0;
#X connect 1 0 2 0;
#X connect 3 0 0 0;
#X connect 4 0 6 0;
#X connect 5 0 2 0;
#X connect 6 0 1 0;
#X connect 6 1 7 0;
#X restore 102 9 pd reset-rendering;
#X obj 102 41 gemhead 50;
#N canvas 213 404 619 439 snapshot 0;
#X obj 61 33 inlet;
#X obj 204 275 pix_texture;
#X msg 93 188 snap;
#X obj 61 159 t b b;
#X msg 61 97 clear;
#N canvas 160 380 299 269 oneshot 0;
#X obj 30 25 inlet;
#X obj 193 89 bang;
#X msg 193 108 1;
#X obj 104 155 spigot;
#X msg 161 109 0;
#X obj 143 133 i 1;
#X obj 30 50 route clear;
#X obj 104 203 outlet;
#X obj 104 103 t b b;
#X obj 104 181 t b b;
#X connect 0 0 6 0;
#X connect 1 0 2 0;
#X connect 2 0 5 1;
#X connect 3 0 9 0;
#X connect 4 0 5 1;
#X connect 5 0 3 1;
#X connect 6 0 1 0;
#X connect 6 1 8 0;
#X connect 8 0 3 0;
#X connect 8 1 5 0;
#X connect 9 0 7 0;
#X connect 9 1 4 0;
#X restore 61 124 pd oneshot;
#X msg 61 290 0;
#X obj 204 204 pix_snap 0 0 800 800;
#X obj 61 311 s render-points;
#X obj 204 309 square 4;
#X obj 204 89 t a b;
#X obj 378 291 pix_write 0 0 800 800;
#X msg 402 197 file \$1 1;
#X obj 402 218 t b a;
#X obj 402 176 savepanel;
#X obj 402 137 r save-plot;
#X obj 204 53 gemhead 55;
#X connect 0 0 4 0;
#X connect 1 0 9 0;
#X connect 2 0 7 0;
#X connect 3 0 6 0;
#X connect 3 1 2 0;
#X connect 4 0 5 0;
#X connect 5 0 3 0;
#X connect 6 0 8 0;
#X connect 7 0 1 0;
#X connect 7 0 11 0;
#X connect 10 0 7 0;
#X connect 10 1 5 0;
#X connect 12 0 13 0;
#X connect 13 0 11 0;
#X connect 13 1 11 0;
#X connect 14 0 12 0;
#X connect 15 0 14 0;
#X connect 16 0 10 0;
#X restore 52 444 pd snapshot;
#X obj 476 84 gemhead 60;
#X obj 476 127 color 0 1 0;
#X obj 476 275 rectangle 0.005 4;
#X obj 476 238 translateXYZ;
#X obj 503 186 r scrub-pos;
#X floatatom 503 207 5 0 0 0 - - -, f 5;
#X msg 77 227 similarity_matrix 0 \$1 1;
#X obj 77 194 f;
#X obj 123 143 r num-frames;
#X obj 123 165 - 1;
#X obj 77 249 s \$0-tID;
#X obj 176 302 r sim-matrix-result;
#X obj 194 547 gemlist;
#X obj 194 610 translateXYZ;
#X obj 194 568 separator;
#N canvas 133 377 750 416 coords 0;
#X obj 98 304 outlet;
#X obj 341 304 outlet;
#X obj 540 255 outlet;
#X obj 98 39 inlet;
#X obj 540 102 inlet;
#X obj 341 39 inlet;
#X obj 341 168 * 8;
#X obj 341 189 - 4;
#X obj 98 160 * 8;
#X obj 98 181 - 4;
#X obj 341 136 /;
#X obj 98 129 /;
#X obj 133 256 * 4;
#X obj 98 238 +;
#X obj 376 249 * 4;
#X obj 341 231 +;
#X obj 376 200 swap 1;
#X obj 376 221 /;
#X obj 133 235 /;
#X obj 133 207 swap 1;
#X text 169 234 <-- offset to get \; first rectangle \; flush w/left
edge;
#X obj 359 109 r num-frames;
#X obj 376 179 r num-frames;
#X obj 116 92 r num-frames;
#X obj 133 186 r num-frames;
#X msg 540 184 \$1 \$1 \$1;
#X obj 540 124 swap 1;
#X obj 540 146 -;
#X connect 3 0 11 0;
#X connect 4 0 26 0;
#X connect 5 0 10 0;
#X connect 6 0 7 0;
#X connect 7 0 15 0;
#X connect 8 0 9 0;
#X connect 9 0 13 0;
#X connect 10 0 6 0;
#X connect 11 0 8 0;
#X connect 12 0 13 1;
#X connect 13 0 0 0;
#X connect 14 0 15 1;
#X connect 15 0 1 0;
#X connect 16 0 17 0;
#X connect 16 1 17 1;
#X connect 17 0 14 0;
#X connect 18 0 12 0;
#X connect 19 0 18 0;
#X connect 19 1 18 1;
#X connect 21 0 10 1;
#X connect 22 0 16 0;
#X connect 23 0 11 1;
#X connect 24 0 19 0;
#X connect 25 0 2 0;
#X connect 26 0 27 0;
#X connect 26 1 27 1;
#X connect 27 0 25 0;
#X restore 266 568 pd coords;
#X obj 194 631 color;
#X obj 224 731 * 4;
#X obj 224 667 r num-frames;
#X obj 329 736 * 4;
#X obj 224 688 swap 1;
#X obj 224 710 /;
#X obj 329 690 swap 1;
#X obj 329 715 /;
#X obj 194 772 rectangle;
#X text 363 737 <--dimensions relative to gemwin (-4 to 4);
#X obj 228 353 list-drip;
#X obj 176 326 t b l;
#X obj 352 456 + 1;
#X obj 323 456 f;
#X msg 316 389 0;
#X obj 323 478 /;
#X obj 323 500 i;
#X obj 353 478 r num-frames;
#X obj 223 445 + 1;
#X obj 194 445 f;
#X obj 224 474 r num-frames;
#X obj 194 474 %;
#X obj 194 506 t b f;
#X obj 228 375 t b f b;
#X obj 329 667 r num-frames;
#X text 297 352 use M. Bouchard's [list-drip] from list-abs in Pd-extended
;
#X obj 73 155 t b b;
#X obj 102 68 t a a;
#X obj 102 90 route gem_state;
#X obj 102 112 route float;
#X connect 0 0 1 0;
#X connect 1 0 46 0;
#X connect 3 0 4 0;
#X connect 4 0 6 0;
#X connect 6 0 5 0;
#X connect 7 0 8 0;
#X connect 8 0 6 1;
#X connect 9 0 13 0;
#X connect 10 0 9 0;
#X connect 11 0 12 0;
#X connect 12 0 10 1;
#X connect 14 0 30 0;
#X connect 15 0 17 0;
#X connect 16 0 19 0;
#X connect 17 0 16 0;
#X connect 18 0 16 1;
#X connect 18 1 16 2;
#X connect 18 2 19 1;
#X connect 19 0 27 0;
#X connect 20 0 27 1;
#X connect 21 0 23 0;
#X connect 22 0 27 2;
#X connect 23 0 24 0;
#X connect 23 1 24 1;
#X connect 24 0 20 0;
#X connect 25 0 26 0;
#X connect 25 1 26 1;
#X connect 26 0 22 0;
#X connect 29 0 42 0;
#X connect 30 0 2 0;
#X connect 30 1 29 0;
#X connect 31 0 32 1;
#X connect 32 0 31 0;
#X connect 32 0 34 0;
#X connect 33 0 32 1;
#X connect 33 0 38 1;
#X connect 34 0 35 0;
#X connect 35 0 18 1;
#X connect 36 0 34 1;
#X connect 37 0 38 1;
#X connect 38 0 37 0;
#X connect 38 0 40 0;
#X connect 39 0 40 1;
#X connect 40 0 41 0;
#X connect 41 0 15 0;
#X connect 41 1 18 0;
#X connect 42 0 38 0;
#X connect 42 1 18 2;
#X connect 42 2 32 0;
#X connect 43 0 25 0;
#X connect 45 0 10 0;
#X connect 45 1 33 0;
#X connect 46 0 47 0;
#X connect 46 1 15 1;
#X connect 47 0 48 0;
#X connect 48 1 45 0;
#X restore 307 42 pd gem;
#N canvas 95 129 800 440 Gem.init 0;
#X msg 23 326 frame \$1;
#X floatatom 23 305 5 0 0 0 - - -, f 5;
#X obj 103 30 loadbang;
#X obj 451 354 r \$0-gemwin-settings;
#X obj 451 381 outlet;
#X obj 23 347 s \$0-gemwin-settings;
#X obj 172 372 s \$0-gemwin-settings;
#X obj 216 311 s \$0-gemwin-settings;
#X msg 172 341 color 0 0 0;
#X obj 599 179 s \$0-gemwin-settings;
#X obj 599 139 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X msg 599 158 fullscreen \$1;
#X obj 599 263 s \$0-gemwin-settings;
#X obj 599 223 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X msg 599 242 border \$1;
#X obj 351 206 s \$0-gemwin-settings;
#X msg 351 183 offset 600 0;
#X msg 475 67 reset;
#X obj 475 92 s \$0-gemwin-settings;
#X obj 341 146 s \$0-gemwin-settings;
#X obj 103 51 t b b b b b b b b;
#X obj 539 313 s \$0-gemwin-settings;
#X msg 539 292 print;
#X msg 216 290 dimen 800 800;
#X msg 23 277 30;
#X msg 341 123 title sim-matrix;
#X obj 307 264 s \$0-gemwin-settings;
#X msg 307 243 lighting \$1;
#X obj 307 224 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X connect 0 0 5 0;
#X connect 1 0 0 0;
#X connect 2 0 20 0;
#X connect 3 0 4 0;
#X connect 8 0 6 0;
#X connect 10 0 11 0;
#X connect 11 0 9 0;
#X connect 13 0 14 0;
#X connect 14 0 12 0;
#X connect 16 0 15 0;
#X connect 17 0 18 0;
#X connect 20 0 24 0;
#X connect 20 1 8 0;
#X connect 20 2 23 0;
#X connect 20 4 16 0;
#X connect 20 5 25 0;
#X connect 20 7 17 0;
#X connect 22 0 21 0;
#X connect 23 0 7 0;
#X connect 24 0 1 0;
#X connect 25 0 19 0;
#X connect 27 0 26 0;
#X connect 28 0 27 0;
#X restore 37 300 pd Gem.init;
#X obj 291 321 bng 15 250 50 0 render-plot empty render-plot 17 7 0
12 -228856 -1 -1;
#X floatatom 167 172 10 0 0 1 - window-size -, f 10;
#X floatatom 107 212 5 0 0 1 - overlap -, f 5;
#N canvas 316 447 952 396 param-settings 0;
#X obj 93 73 r sf-length;
#X obj 274 98 r window-size;
#X obj 306 246 /;
#X obj 306 267 s hop-samp;
#X obj 324 172 r overlap;
#X floatatom 68 240 10 0 0 0 - - -, f 10;
#X obj 68 258 s num-frames;
#X obj 68 210 i;
#X obj 68 105 f;
#X obj 324 193 t b b f;
#X obj 324 214 s reset;
#X obj 274 119 t b f;
#X obj 274 140 s reset;
#X obj 68 26 r reset;
#X obj 452 225 list split 1;
#X obj 452 266 list split 1;
#X obj 452 104 t b f;
#X obj 623 229 list split 1;
#X obj 623 270 list split 1;
#X obj 623 108 t b f;
#X msg 623 145 256 512 1024 2048 4096 8192 16384 32768;
#X msg 452 131 1 2 4 8;
#X obj 492 298 s overlap;
#X obj 663 302 s window-size;
#X obj 452 83 r overlap-radio;
#X obj 623 87 r window-radio;
#X obj 692 201 + 1;
#X obj 704 178 t f f;
#X obj 521 201 + 1;
#X obj 533 178 t f f;
#X obj 68 129 -;
#X obj 113 112 r window-size;
#X obj 68 177 /;
#X obj 103 143 r hop-samp;
#X connect 0 0 8 0;
#X connect 1 0 11 0;
#X connect 2 0 3 0;
#X connect 4 0 9 0;
#X connect 5 0 6 0;
#X connect 7 0 5 0;
#X connect 8 0 30 0;
#X connect 9 0 10 0;
#X connect 9 1 2 0;
#X connect 9 2 2 1;
#X connect 11 0 12 0;
#X connect 11 1 2 0;
#X connect 13 0 8 0;
#X connect 14 0 15 0;
#X connect 15 1 22 0;
#X connect 16 0 21 0;
#X connect 16 1 29 0;
#X connect 17 0 18 0;
#X connect 18 1 23 0;
#X connect 19 0 20 0;
#X connect 19 1 27 0;
#X connect 20 0 17 0;
#X connect 21 0 14 0;
#X connect 24 0 16 0;
#X connect 25 0 19 0;
#X connect 26 0 17 1;
#X connect 27 0 26 0;
#X connect 27 1 18 1;
#X connect 28 0 14 1;
#X connect 29 0 28 0;
#X connect 29 1 15 1;
#X connect 30 0 32 0;
#X connect 31 0 30 1;
#X connect 32 0 7 0;
#X connect 33 0 32 1;
#X restore 307 63 pd param-settings;
#N canvas 569 75 589 576 analysis 0;
#X obj 74 268 r hop-samp;
#X obj 90 304 r window-size;
#X msg 37 367 analyze \$1 \$2;
#X obj 37 329 pack f f;
#X obj 37 268 *;
#X obj 37 169 until;
#X obj 37 230 f;
#X obj 71 230 + 1;
#X obj 37 118 f;
#X obj 37 139 t f b;
#X obj 55 92 r num-frames;
#X obj 37 499 s \$0-tID;
#X obj 37 394 bfcc sim-matrix-sample;
#X obj 37 446 list split 1;
#X obj 37 468 list split 20;
#X text 135 458 use BFCCs 1-20;
#X obj 306 194 r \$0-tID;
#X obj 306 266 timbreID;
#X msg 348 230 print;
#X obj 372 336 s sim-matrix-result;
#X msg 52 199 0;
#X obj 37 22 r do-analysis;
#X obj 37 44 t b b;
#X msg 158 92 clear;
#X obj 158 114 s \$0-tID;
#X obj 372 310 route similarity_matrix;
#X connect 0 0 4 1;
#X connect 1 0 3 1;
#X connect 2 0 12 0;
#X connect 3 0 2 0;
#X connect 4 0 3 0;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 6 0 4 0;
#X connect 7 0 6 1;
#X connect 8 0 9 0;
#X connect 9 0 5 0;
#X connect 9 1 20 0;
#X connect 10 0 8 1;
#X connect 12 0 13 0;
#X connect 13 1 14 0;
#X connect 14 0 11 0;
#X connect 16 0 17 0;
#X connect 17 3 25 0;
#X connect 18 0 17 0;
#X connect 20 0 6 1;
#X connect 21 0 22 0;
#X connect 22 0 8 0;
#X connect 22 1 23 0;
#X connect 23 0 24 0;
#X connect 25 0 19 0;
#X restore 179 63 pd analysis;
#X obj 37 172 hradio 15 1 0 8 window-radio window-radio-set window-size
0 -8 0 12 -262144 -1 -1 3;
#X obj 37 212 hradio 15 1 0 4 overlap-radio overlap-radio-set overlap
0 -8 0 12 -262144 -1 -1 1;
#X obj 291 182 bng 15 250 50 0 stop-sf empty stop 17 7 0 12 -258113
-1 -1;
#N canvas 564 59 827 545 soundfile 0;
#X obj 42 152 tabplay~ sim-matrix-sample;
#X obj 42 31 r play-sf;
#X obj 86 91 r stop-sf;
#X msg 86 112 stop;
#X obj 421 462 soundfiler;
#X obj 578 382 table sim-matrix-sample;
#X obj 421 403 openpanel;
#X obj 421 486 s sf-length;
#X msg 421 430 read -resize -maxsize 2.7e+08 \$1 sim-matrix-sample
;
#X obj 421 382 r open-sf;
#X obj 431 59 r play-sf;
#X obj 431 251 line;
#X obj 431 272 s scrub-pos;
#X obj 431 150 f;
#X msg 431 171 -4 \, 4 \$1;
#X obj 449 196 r stop-sf;
#X msg 449 217 stop;
#X obj 465 116 / 44.1;
#X obj 465 94 r sf-length;
#X obj 42 233 outlet~;
#X connect 0 0 19 0;
#X connect 1 0 0 0;
#X connect 2 0 3 0;
#X connect 3 0 0 0;
#X connect 4 0 7 0;
#X connect 6 0 8 0;
#X connect 8 0 4 0;
#X connect 9 0 6 0;
#X connect 10 0 13 0;
#X connect 11 0 12 0;
#X connect 13 0 14 0;
#X connect 14 0 11 0;
#X connect 15 0 16 0;
#X connect 16 0 11 0;
#X connect 17 0 13 1;
#X connect 18 0 17 0;
#X restore 291 202 pd soundfile;
#X obj 291 341 bng 15 250 50 0 save-plot empty save-plot 17 7 0 12
-204786 -1 -1;
#N canvas 421 251 518 379 INSTRUCTIONS 1;
#X text 27 271 You can save your plot to a .JPG file by clicking the
"save-plot" button and typing in a file name. You can also play the
currently selected time segment of the file. A scrub bar will move
across the plot during playback.;
#X text 27 71 To plot something \, first open a soundfile by clicking
the "open-soundfile" button. Then turn GEM rendering on using the checkbox
in the lower left corner. Next \, click the "render-plot" button in
the lower right corner.;
#X text 27 131 You can change the analysis window size and overlap
settings with the provided radio buttons. Starting from the bottom
\, each row in the resulting plot has N squares \, representing the
N analysis frames taken. You can judge the similarity of one frame
to any other frame based on its color: pure white is perfect similarity
\, and black is maximum dissimlarity. That's why you get a nice white
diagonal from the lower left to upper right: those X \, Y positions
in the plot indicate the similarity of each frame relative to itself.
;
#X text 27 21 This patch plots similarity matrices using the timbreID
and [bfcc] objects. It also requires GEM and uses M. Bouchard's [list-drip]
(taken from list-abs).;
#X restore 37 63 pd INSTRUCTIONS;
#X obj 4 5 cnv 10 400 10 empty empty empty 20 12 0 14 -233017 -66577
0;
#X obj 4 5 cnv 10 10 400 empty empty empty 20 12 0 14 -233017 -66577
0;
#X obj 291 224 volume~;
#X connect 5 0 3 0;
#X connect 14 0 19 0;
