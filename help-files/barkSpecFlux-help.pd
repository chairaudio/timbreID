#N canvas 216 33 920 714 10;
#X obj 58 532 nbx 6 32 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 32
-262144 -1 -1 0 256;
#X obj 157 259 hsl 400 15 0 128000 0 0 empty empty Scrub -2 -8 0 12
-191407 -1 -1 0 1;
#X obj 3 4 cnv 10 400 10 empty empty empty 20 12 0 14 -233017 -66577
0;
#X obj 3 4 cnv 10 10 400 empty empty empty 20 12 0 14 -233017 -66577
0;
#N canvas 452 22 851 704 other-settings 0;
#X obj 44 66 hradio 15 1 0 5 empty empty empty 0 -8 0 10 -262144 -1
-1 0;
#X msg 44 86 window_function \$1;
#X msg 80 128 set another-sample-array;
#X msg 119 164 samplerate 48000;
#X text 268 127 Read from a different array;
#X msg 145 217 power_spectrum \$1;
#X obj 145 199 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 44 655 outlet;
#X text 253 163 Specify your sample's sampling rate. (default: 44100)
;
#X text 286 217 Use power spectrum. (default: magnitude);
#X msg 318 490 separation 128;
#X obj 175 249 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X msg 175 267 normalize \$1;
#X text 276 267 Normalize spectrum. (default: ON);
#X text 456 538 Squared difference vs. Absolute value of difference.
;
#X msg 343 538 squared_diff \$1;
#X obj 343 518 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X text 42 29 Change windowing function. Rectangular (0) \, Blackman
(1) \, Cosine (2) \, Hamming (3) \, or Hann (4). (default: Blackman)
;
#X text 308 304 Construct a new filterbank with a specific spacing.
;
#X msg 208 304 filterbank 1;
#X msg 385 578 print;
#X obj 247 364 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X msg 247 384 spec_band_avg \$1;
#X obj 277 424 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X msg 277 444 filter_avg \$1;
#X text 435 580 Print current settings in the post window;
#X text 304 412 If using the triangular Bark spaced filters \, you
can either sum or average the energy in each filter (default: sum)
;
#X text 273 332 Rather than sum energy in the triangular Bark spaced
filters to get the amount of energy in each Bark band \, you can average
energy in the unfiltered bins (default: OFF);
#X text 445 484 Set separation in samples between analysis windows
(default: half of current window size);
#X connect 0 0 1 0;
#X connect 1 0 7 0;
#X connect 2 0 7 0;
#X connect 3 0 7 0;
#X connect 5 0 7 0;
#X connect 6 0 5 0;
#X connect 10 0 7 0;
#X connect 11 0 12 0;
#X connect 12 0 7 0;
#X connect 15 0 7 0;
#X connect 16 0 15 0;
#X connect 19 0 7 0;
#X connect 20 0 7 0;
#X connect 21 0 22 0;
#X connect 22 0 7 0;
#X connect 23 0 24 0;
#X connect 24 0 7 0;
#X restore 206 353 pd other-settings;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-waveform 1024 float 0;
#X coords 0 1 1023 -1 200 140 1 0 0;
#X restore 652 247 graph;
#N canvas 666 270 552 163 soundfile 0;
#X obj 50 83 soundfiler;
#X obj 185 100 table \$0-sample 130000;
#X msg 50 58 read -skip 120000 ./audio/testing.wav \$1-sample;
#X obj 50 14 loadbang;
#X obj 50 36 f \$0;
#X connect 2 0 0 0;
#X connect 3 0 4 0;
#X connect 4 0 2 0;
#X restore 652 397 pd soundfile;
#N canvas 722 238 369 330 waveform 0;
#X obj 46 61 inlet;
#X obj 46 82 t f f;
#X obj 46 284 outlet;
#X obj 131 131 + 1023;
#X msg 86 200 copy_range 0 \$3-sample \$1 \$2;
#X obj 86 164 pack f f \$0;
#X obj 86 241 tabletool \$0-waveform;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 0 5 0;
#X connect 1 1 3 0;
#X connect 3 0 5 1;
#X connect 4 0 6 0;
#X connect 5 0 4 0;
#X restore 154 279 pd waveform;
#X obj 272 583 list prepend 0;
#N canvas 0 22 450 278 (subpatch) 0;
#X array \$0-band-diffs 50 float 0;
#X coords 0 0.1 49 -0.1 200 140 1 0 0;
#X restore 652 447 graph;
#X obj 272 532 t l l;
#X obj 374 563 list length;
#X msg 154 308 analyze \$1 1024;
#X obj 703 85 barkSpecFlux~;
#X text 513 59 See the real-time version for more information on Bark
spectrum flux in general.;
#X obj 374 585 change;
#X obj 374 607 pack f \$0;
#X msg 58 73 analyze 44100 2000;
#X text 189 430 Creation arguments are the name of the sample array
to read from \, filterbank spacing in Barks \, and separation in samples
between analysis windows.;
#X text 693 643 Updated for timbreID version 0.7;
#X text 76 102 Analyze a FORWARD window starting at sample 44100 that
is 2000 samples long (samples 44100 - 46099). The BACK analysis window
will start N samples earlier \, where N is set by the "separation"
argument. Flux is the sum of per-Bark-band energy differences between
these windows. The energy difference of each Bark band is reported
from the right outlet as a list. Passing a starting sample that isn't
at least N samples forward from the beginning of the array may produce
incorrect flux values.;
#X obj 58 493 barkSpecFlux \$0-sample 0.5 256;
#X msg 374 629 \; \$2-band-diffs resize \$1 \;;
#X obj 272 605 s \$0-band-diffs;
#X text 693 663 July 2017;
#X connect 1 0 7 0;
#X connect 4 0 21 0;
#X connect 7 0 12 0;
#X connect 8 0 23 0;
#X connect 10 0 8 0;
#X connect 10 1 11 0;
#X connect 11 0 15 0;
#X connect 12 0 21 0;
#X connect 15 0 16 0;
#X connect 16 0 22 0;
#X connect 17 0 21 0;
#X connect 21 0 0 0;
#X connect 21 1 10 0;
